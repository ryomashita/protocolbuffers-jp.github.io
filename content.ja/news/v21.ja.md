+++
title = "バージョン 21.x のニュース発表"
linkTitle = "Version 21.x"
toc_hide = "true"
description = "Protocol Buffers バージョン 21.x に関する変更が発表されました。"
type = "docs"
+++

以下の発表はバージョン 21.x に特有です。時系列で表示された情報については、[ニュース](/news) を参照してください。

## Python の更新 {#python-updates}

Protocol Buffers における Python 言語サポートにいくつかの変更を加えました。バージョン 4.21.0 は、3.20.1 に続く新しいメジャーバージョンです。新しいバージョンは [upb ライブラリ](https://github.com/protocolbuffers/upb) に基づいており、以前のリリースよりも大きなペイロードに対して特に優れたパース性能を提供します。また、Apple silicon 向けの事前ビルドされたバイナリモジュールも含まれており、手動ビルドなしでパフォーマンスが向上します。

新しいリリースにはいくつかの破壊的な変更が含まれています。具体的には以下のとおりです：

*   [`UnknownFields()`](https://googleapis.dev/python/protobuf/3.17.0/google/protobuf/message.html#google.protobuf.message.Message.UnknownFields) メソッドは、暗黙的に作成されたクラスに依存していたが、明示的に作成された `UnknownFieldSet` クラスに置き換えられました。
*   特定の文字列やエラーメッセージの形式など、一部の非コア特性が変更されている可能性があります。これらは破壊的な変更とは見なされませんが、既存のコードベースに影響を与える可能性があります。
*   Python と C++ 間でメッセージを共有するアプリケーションは、新しいバージョンで壊れる可能性があります。ほとんどの開発者には影響がないかもしれませんが、[Nucleus](https://github.com/google/nucleus) および他のライブラリのユーザーは影響を受けるかもしれません。回避策として、互換性を維持するために [環境変数を設定](/reference/python/python-generated#sharing-messages) することができます。
*   Python upb は、protoc 3.19.0 以降で生成された生成コードが必要です。
