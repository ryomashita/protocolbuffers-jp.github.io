+++
title = "2024年1月5日に発表された変更点"
linkTitle = "2024年1月5日"
toc_hide = "true"
description = "2024年1月5日にProtocol Buffersで発表された変更点。"
type = "docs"
+++

このトピックでは、26.xラインのRubyとPythonでの互換性のない変更点について説明します。

## Rubyの互換性のない変更点

### RubyにおけるFreezeが再帰的になりました

26.xラインから、freezeが適用されると再帰的に適用され、すべてのサブメッセージ、マップ、繰り返しフィールドに影響を与えます。

## Pythonの互換性のない変更点

### 廃止されたAPIの削除

26.xリリースでは、以下の廃止されたAPIが削除されます：

*   [`AddFileDescriptor`](https://googleapis.dev/python/protobuf/latest/google/protobuf/descriptor_pool.html#google.protobuf.descriptor_pool.DescriptorPool.AddFileDescriptor)
*   [`AddDescriptor`](https://googleapis.dev/python/protobuf/latest/google/protobuf/descriptor_pool.html#google.protobuf.descriptor_pool.DescriptorPool.AddDescriptor)
*   [`AddEnumDescriptor`](https://googleapis.dev/python/protobuf/latest/google/protobuf/descriptor_pool.html#google.protobuf.descriptor_pool.DescriptorPool.AddEnumDescriptor)
*   [`AddExtensionDescriptor`](https://googleapis.dev/python/protobuf/latest/google/protobuf/descriptor_pool.html#google.protobuf.descriptor_pool.DescriptorPool.AddExtensionDescriptor)
*   [`AddServiceDescriptor`](https://googleapis.dev/python/protobuf/latest/google/protobuf/descriptor_pool.html#google.protobuf.descriptor_pool.DescriptorPool.AddServiceDescriptor)

### None Iterableで繰り返しフィールドを拡張することを拒否

26.xリリースから、`None` iterableで繰り返しフィールドを拡張することは拒否されます（`TypeError`が発生します）。例えば、`m.repeated_int32.extend(None)`は拒否されます。

### メッセージクラスでのRegisterExtensionの削除

26.xリリースから、[`RegisterExtension`](https://googleapis.dev/python/protobuf/latest/google/protobuf/descriptor_pb2.html#google.protobuf.descriptor_pb2.DescriptorProto.ExtensionRange.RegisterExtension)が削除されます。Pythonでは、メッセージオブジェクトの`Extensions`プロパティを使用して拡張機能にアクセスできます。

これは純粋なPythonとPythonのC++実装の両方に影響しますが、upb Pythonには影響しません。
