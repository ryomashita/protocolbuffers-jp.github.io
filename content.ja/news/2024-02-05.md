+++
title = "2024年2月5日に発表された変更"
linkTitle = "2024年2月5日"
toc_hide = "true"
description = "2024年2月5日にProtocol Buffersで発表された変更についての情報です。"
type = "docs"
+++

このトピックでは、26.xラインのJava、C++、Pythonにおける互換性のない変更について説明します。

## JSONフォーマッターオプションの変更 {#JSON}

26.xラインから、デフォルト値のフィールドを出力するJSONフォーマッターオプションは、proto2とproto3の`optional`フィールドを一貫して処理するための固定された方法に置き換えられました。

*   Java: `includingDefaultValueFields()` は `alwaysPrintFieldsWithNoPresence()` に置き換えられました。
*   C++: `always_print_default_values` は `always_print_fields_with_no_presence=True` に置き換えられました。
*   Py: `including_default_value_fields=True` は `always_print_fields_with_no_presence=True` に置き換えられました。

新しいフラグは、古いフラグと同じようにproto3メッセージに対して動作しますが、もはやproto2の`optional`フィールドには適用されません。古いフラグはproto2の`optional`フィールドに適用されましたが、proto3の`optional`フィールドには適用されませんでした。
