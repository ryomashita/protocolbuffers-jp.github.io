## 2023年12月27日に発表された変更

### Rubyの互換性のない変更

26.xラインで以下の変更が計画されています：

* `RepeatedField#each_index`を正しいセマンティクスに修正します。
    ([#11767](https://github.com/protocolbuffers/protobuf/pull/11767))
* 4月に発表された[移行](/news/2023-04-20)を完了するため、Ruby DSLと関連する互換性コードを削除します。
* `Message#to_h`の修正：
    * unsetのoneofフィールドを削除します。
        ([#6167](https://github.com/protocolbuffers/protobuf/issues/6167))
    * unsetのサブメッセージフィールドを削除します。
* [`encode_json`](https://github.com/protocolbuffers/protobuf/blob/2fb0b93d9de226ea96f2dc2b4779eb4712d01d5c/ruby/ext/google/protobuf_c/message.c#L1118)/[`decode_json`](https://github.com/protocolbuffers/protobuf/blob/2fb0b93d9de226ea96f2dc2b4779eb4712d01d5c/ruby/ext/google/protobuf_c/message.c#L1004)にメッセージのプールを使用します。
* 廃止された構文アクセサー`FileDescriptor.syntax`を削除し、代わりに意味的なチェックを追加します：
    * フィールドが存在するかをテストする`FieldDescriptor.has_presence`。
    * 繰り返しフィールドがパックされているかをテストする`FieldDescriptor.is_packed`。
    * 文字列フィールドがUTF-8検証を必要とするかをテストする`FieldDescriptor.requires_utf8_validation`。
    * 列挙型が閉じているかをテストする`EnumDescriptor.is_closed`。

## PHPの互換性のない変更

26.xラインで以下の変更が計画されています：

* セッターで文字列フィールドのUTF-8を検証します。
* 汎用サービスを削除します。
    ([commit 40ad3fa](https://github.com/protocolbuffers/protobuf/commit/40ad3fac603ba3c96e52a1266cd785a7adb8e3e4))

## Pythonの互換性のない変更

26.xラインで以下の変更が計画されています：

* `str(msg)`で文字列フィールドの無効なUTF-8をエスケープします。
* `text_format.MessageToString()`は、無効なUTF-8シーケンスをエスケープしながら、デフォルトで生のUTF-8を出力するようにします。
* タイムスタンプの境界を修正します（[commit 1250d5f](https://github.com/protocolbuffers/protobuf/commit/1250d5f6cccb0a45f959c7219980a0aad5060ee5)).

{/*examples*/}

## upb Breaking Changes {/examples}

26.x ラインには、次の変更が計画されています:

*   修正
    [`IgnoreUnknownEnumString` が有効になっているときの JSON パースの非適合](https://github.com/protocolbuffers/protobuf/blob/2f7b2832b6a62fec88efacbb97bf0a91b6a3670e/upb/conformance/conformance_upb_failures.txt) を修正しました。
