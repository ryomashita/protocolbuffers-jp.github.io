+++
title = "field_comparator.h"
toc_hide = "true"
linkTitle = "C++"
description = "このセクションには、C++でプロトコルバッファクラスを操作するためのリファレンスドキュメントが含まれています。"
type = "docs"
+++

<p><code>#include &lt;google/protobuf/util/field_comparator.h&gt;<br>namespace <a href="#google.protobuf.util">google::protobuf::util</a></code></p><p>フィールド比較のためのクラスを定義します。</p><table width="100%"><tr><th colspan="2"><h3 style="margin-top: 4px">このファイル内のクラス</h3></th></tr><tr><td><div><code><a href="#FieldComparator">FieldComparator</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">プロトコルバッファフィールドを比較するためのインターフェースを指定する基本クラス。</div></td></tr><tr><td><div><code><a href="#SimpleFieldComparator">SimpleFieldComparator</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"><a href='#FieldComparator'>FieldComparator</a>の基本実装。</div></td></tr><tr><td><div><code><a href="#DefaultFieldComparator">DefaultFieldComparator</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"></div></td></tr></table><h2 id="FieldComparator">class FieldComparator</h2><p><code>#include &lt;<a href="#">google/protobuf/util/field_comparator.h</a>&gt;<br>namespace <a href="#google.protobuf.util">google::protobuf::util</a></code></p><p>プロトコルバッファフィールドを比較するためのインターフェースを指定する基本クラス。</p><p>通常のユーザーは、このインターフェースではなく<a href='#DefaultFieldComparator'>DefaultFieldComparator</a>を使用するかサブクラス化することを検討すべきです。現在、これは未知のフィールドの比較をサポートしていません。</p>

<p>既知のサブクラス:</p><ul><li><code><a href="#SimpleFieldComparator">SimpleFieldComparator</a></code></li></ul><table><tr><th colspan="2"><h3 style="margin-top: 4px">メンバー</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>enum</code></td><td style="border-left-width: 0px"id="FieldComparator.ComparisonResult"><div style="padding-left: 16px; text-indent: -16px"><code><b>ComparisonResult</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"> <a href="#FieldComparator.ComparisonResult.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="FieldComparator.FieldComparator"><div style="padding-left: 16px; text-indent: -16px"><code><b>FieldComparator</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>virtual </code></td><td style="border-left-width: 0px"id="FieldComparator.~FieldComparator"><div style="padding-left: 16px; text-indent: -16px"><code><b>~FieldComparator</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>virtual <a href='#FieldComparator.ComparisonResult'>ComparisonResult</a></code></td><td style="border-left-width: 0px"id="FieldComparator.Compare"><div style="padding-left: 16px; text-indent: -16px"><code><b>Compare</b>(const <a href='google.protobuf.message#Message'>Message</a> &amp; message_1, const <a href='google.protobuf.message#Message'>Message</a> &amp; message_2, const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field, int index_1, int index_2, const <a href='google.protobuf.util.message_differencer#FieldContext'>util::FieldContext</a> * field_context)  = 0</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">2つのプロトコルバッファメッセージのフィールドの値を比較します。<a href="#FieldComparator.Compare.details">詳細...</a></div></td></tr></table> <hr><h3 id="FieldComparator.ComparisonResult.details"><code>enum FieldComparator::ComparisonResult {<br>&nbsp;&nbsp;SAME,<br>&nbsp;&nbsp;DIFFERENT,<br>&nbsp;&nbsp;RECURSE<br>}</code></h3><div style="margin-left: 16px"><p></p><table><tr><td>SAME</td><td><p>比較されたフィールドは等しいです。</p><p>サブメッセージを比較する場合、ユーザーは再帰的に内容を比較すべきではありません。</p>
</td></tr><tr><td>DIFFERENT</td><td><p>比較されたフィールドは異なります。</p><p>サブメッセージを比較する場合、ユーザーは再帰的に内容を比較すべきではありません。</p>
</td></tr><tr><td>RECURSE</td><td><p>比較されたサブメッセージは再帰的に比較する必要があります。</p><p><a href='#FieldComparator'>FieldComparator</a>は再帰的比較のセマンティクスを指定しません。この値は単純な値に対して返すべきではありません。</p>
</td></tr></table></div> <hr><h3 id="FieldComparator.Compare.details"><code>virtual <a href='#FieldComparator.ComparisonResult'>ComparisonResult</a> FieldComparator::Compare(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.util.message_differencer#FieldContext'>util::FieldContext</a> * field_context)  = 0</code></h3><div style="margin-left: 16px"><p>2つのプロトコルバッファメッセージのフィールドの値を比較します。</p><p>単純な値に対してはSAMEまたはDIFFERENTを返し、サブメッセージに対してはSAME、DIFFERENT、またはRECURSEを返します。サブメッセージでないフィールドに対してRECURSEを返すことは違法です。与えられた<a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a>が繰り返しフィールドを指す場合、インデックスは有効である必要があります。それ以外の場合は無視されるべきです。</p>
```

<p><a href='google.protobuf.util.message_differencer#FieldContext'>FieldContext</a> は、比較されているフィールドの特定のインスタンスに関する情報を含んでおり、<a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> はフィールドに関する一般的なタイプ情報のみを含んでいます。</p>
</div><h2 id="SimpleFieldComparator">class SimpleFieldComparator: public <a href="#FieldComparator">FieldComparator</a></h2><p><code>#include &lt;<a href="#">google/protobuf/util/field_comparator.h</a>&gt;<br>namespace <a href="#google.protobuf.util">google::protobuf::util</a></code></p><p><a href='#FieldComparator'>FieldComparator</a> の基本的な実装です。</p><p>浮動小数点値の比較を3つのモードでサポートしています: 正確な比較、MathUtil::AlmostEqual メソッドを使用した近似比較、および MathUtil::WithinFractionOrMargin を使用した任意の精度の比較。</p>

<p>既知のサブクラス:</p><ul><li><code><a href="#DefaultFieldComparator">DefaultFieldComparator</a></code></li></ul><table><tr><th colspan="2"><h3 style="margin-top: 4px">メンバー</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>enum</code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.FloatComparison"><div style="padding-left: 16px; text-indent: -16px"><code><b>FloatComparison</b></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"> <a href="#SimpleFieldComparator.FloatComparison.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.SimpleFieldComparator"><div style="padding-left: 16px; text-indent: -16px"><code><b>SimpleFieldComparator</b>()</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">浮動小数点数の比較を EXACT に設定して新しい比較子を作成します。</div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.~SimpleFieldComparator"><div style="padding-left: 16px; text-indent: -16px"><code><b>~SimpleFieldComparator</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.set_float_comparison"><div style="padding-left: 16px; text-indent: -16px"><code><b>set_float_comparison</b>(<a href='#SimpleFieldComparator.FloatComparison'>FloatComparison</a> float_comparison)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#SimpleFieldComparator.FloatComparison'>FloatComparison</a></code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.float_comparison"><div style="padding-left: 16px; text-indent: -16px"><code><b>float_comparison</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.set_treat_nan_as_equal"><div style="padding-left: 16px; text-indent: -16px"><code><b>set_treat_nan_as_equal</b>(bool treat_nan_as_equal)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">フィールド比較子が、両方が NaN である浮動小数点数または倍精度浮動小数点数を等しく扱うか（treat_nan_as_equal = true）、異なると扱うか（treat_nan_as_equal = false）を設定します。<a href="#SimpleFieldComparator.set_treat_nan_as_equal.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.treat_nan_as_equal"><div style="padding-left: 16px; text-indent: -16px"><code><b>treat_nan_as_equal</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.SetFractionAndMargin"><div style="padding-left: 16px; text-indent: -16px"><code><b>SetFractionAndMargin</b>(const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field, double fraction, double margin)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">指定されたフィールドの浮動小数点数比較のための分数とマージンを設定します。<a href="#SimpleFieldComparator.SetFractionAndMargin.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.SetDefaultFractionAndMargin"><div style="padding-left: 16px; text-indent: -16px"><code><b>SetDefaultFractionAndMargin</b>(double fraction, double margin)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">すべての浮動小数点数および倍精度浮動小数点数フィールドの浮動小数点数比較のための分数とマージンを設定します。ただし、フィールドに特定の設定が与えられていない場合は、上記の <a href='#SimpleFieldComparator.SetFractionAndMargin'>SetFractionAndMargin()</a> を介して設定されます。<a href="#SimpleFieldComparator.SetDefaultFractionAndMargin.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>protected <a href='#FieldComparator.ComparisonResult'>ComparisonResult</a></code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.SimpleCompare"><div style="padding-left: 16px; text-indent: -16px"><code><b>SimpleCompare</b>(const <a href='google.protobuf.message#Message'>Message</a> &amp; message_1, const <a href='google.protobuf.message#Message'>Message</a> &amp; message_2, const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field, int index_1, int index_2, const <a href='google.protobuf.util.message_differencer#FieldContext'>util::FieldContext</a> * field_context)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">2 つのメッセージの指定されたフィールドの比較結果を返します。<a href="#SimpleFieldComparator.SimpleCompare.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>protected bool</code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.CompareWithDifferencer"><div style="padding-left: 16px; text-indent: -16px"><code><b>CompareWithDifferencer</b>(<a href='google.protobuf.util.message_differencer#MessageDifferencer'>MessageDifferencer</a> * differencer, const <a href='google.protobuf.message#Message'>Message</a> &amp; message1, const <a href='google.protobuf.message#Message'>Message</a> &amp; message2, const <a href='google.protobuf.util.message_differencer#FieldContext'>util::FieldContext</a> * field_context)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">提供された message_differencer を使用して比較します。<a href="#SimpleFieldComparator.CompareWithDifferencer.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>protected <a href='#FieldComparator.ComparisonResult'>ComparisonResult</a></code></td><td style="border-left-width: 0px"id="SimpleFieldComparator.ResultFromBoolean"><div style="padding-left: 16px; text-indent: -16px"><code><b>ResultFromBoolean</b>(bool boolean_result) const</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">boolean_result が true の場合は <a href='#FieldComparator.ComparisonResult'>FieldComparator::SAME</a> を返し、それ以外の場合は <a href='#FieldComparator.ComparisonResult'>FieldComparator::DIFFERENT</a> を返します。</div></td></tr></table> <hr><h3 id="SimpleFieldComparator.FloatComparison.details"><code>enum SimpleFieldComparator::FloatComparison {<br>&nbsp;&nbsp;EXACT,<br>&nbsp;&nbsp;APPROXIMATE<br>}</code></h3><div style="margin-left: 16px"><p></p><table><tr><td>EXACT</td><td>浮動小数点数および倍精度浮動小数点数は正確に比較されます。</td></tr><tr><td>APPROXIMATE</td><td>浮動小数点数および倍精度浮動小数点数は、MathUtil::AlmostEqual メソッドまたは MathUtil::WithinFractionOrMargin メソッドを使用して比較されます。</td></tr></table></div> <hr><h3 id="SimpleFieldComparator.set_treat_nan_as_equal.details"><code>void SimpleFieldComparator::set_treat_nan_as_equal(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool treat_nan_as_equal)</code></h3><div style="margin-left: 16px"><p>フィールド比較子が、両方が NaN である浮動小数点数または倍精度浮動小数点数を等しく扱うか（treat_nan_as_equal = true）、異なると扱うか（treat_nan_as_equal = false）を設定します。</p><p>デフォルトでは、NaN を常に異なるものとして扱います。</p>
</div> <hr><h3 id="SimpleFieldComparator.SetFractionAndMargin.details"><code>void SimpleFieldComparator::SetFractionAndMargin(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double fraction,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double margin)</code></h3><div style="margin-left: 16px"><p>指定されたフィールドの浮動小数点数比較のための分数とマージンを設定します。</p><p>値を比較するために MathUtil::WithinFractionOrMargin を使用します。</p>

```markdown
<p>REQUIRES: field-&gt;cpp_type == <a href='google.protobuf.descriptor#FieldDescriptor.CppType'>FieldDescriptor::CPPTYPE_DOUBLE</a> or </p>

<pre>field-&gt;cpp_type == FieldDescriptor::CPPTYPE_FLOAT</pre>

<p> REQUIRES: float_comparison_ == APPROXIMATE </p>
</div> <hr><h3 id="SimpleFieldComparator.SetDefaultFractionAndMargin.details"><code>void SimpleFieldComparator::SetDefaultFractionAndMargin(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double fraction,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double margin)</code></h3><div style="margin-left: 16px"><p>Sets the fraction and margin for the float comparison of all float and double fields, unless a field has been given a specific setting via <a href='#SimpleFieldComparator.SetFractionAndMargin'>SetFractionAndMargin()</a> above. </p><p>Uses MathUtil::WithinFractionOrMargin to compare the values.</p>

<p>REQUIRES: float_comparison_ == APPROXIMATE </p>
</div> <hr><h3 id="SimpleFieldComparator.SimpleCompare.details"><code>protected <a href='#FieldComparator.ComparisonResult'>ComparisonResult</a> SimpleFieldComparator::SimpleCompare(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.util.message_differencer#FieldContext'>util::FieldContext</a> * field_context)</code></h3><div style="margin-left: 16px"><p>Returns the comparison result for the given field in two messages. </p><p>This function is called directly by <a href='#DefaultFieldComparator.Compare'>DefaultFieldComparator::Compare</a>. Subclasses can call this function to compare fields they do not need to handle specially. </p>
</div> <hr><h3 id="SimpleFieldComparator.CompareWithDifferencer.details"><code>protected bool SimpleFieldComparator::CompareWithDifferencer(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='google.protobuf.util.message_differencer#MessageDifferencer'>MessageDifferencer</a> * differencer,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.util.message_differencer#FieldContext'>util::FieldContext</a> * field_context)</code></h3><div style="margin-left: 16px"><p>Compare using the provided message_differencer. </p><p>For example, a subclass can use this method to compare some field in a certain way using the same message_differencer instance and the field context. </p>
</div><h2 id="DefaultFieldComparator">class DefaultFieldComparator: public <a href="#SimpleFieldComparator">SimpleFieldComparator</a></h2><p><code>#include &lt;<a href="#">google/protobuf/util/field_comparator.h</a>&gt;<br>namespace <a href="#google.protobuf.util">google::protobuf::util</a></code></p><p></p><table><tr><th colspan="2"><h3 style="margin-top: 4px">Members</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>virtual <a href='#FieldComparator.ComparisonResult'>ComparisonResult</a></code></td><td style="border-left-width: 0px"id="DefaultFieldComparator.Compare"><div style="padding-left: 16px; text-indent: -16px"><code><b>Compare</b>(const <a href='google.protobuf.message#Message'>Message</a> &amp; message_1, const <a href='google.protobuf.message#Message'>Message</a> &amp; message_2, const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field, int index_1, int index_2, const <a href='google.protobuf.util.message_differencer#FieldContext'>util::FieldContext</a> * field_context)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Compares the values of a field in two protocol buffer messages.  <a href="#DefaultFieldComparator.Compare.details">more...</a></div></td></tr></table> <hr><h3 id="DefaultFieldComparator.Compare.details"><code>virtual <a href='#FieldComparator.ComparisonResult'>ComparisonResult</a> DefaultFieldComparator::Compare(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message_1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.message#Message'>Message</a> &amp; message_2,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int index_1,<br>&nbsp;&nbsp;&nbsp;&nbsp

<p><a href='google.protobuf.util.message_differencer#FieldContext'>FieldContext</a> は、比較されているフィールドの特定のインスタンスに関する情報を含んでおり、一方、<a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> はフィールドに関する一般的なタイプ情報のみを含んでいます。</p>

</div>
