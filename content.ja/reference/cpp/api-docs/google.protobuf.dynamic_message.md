
+++
title = "dynamic_message.h"
toc_hide = "true"
linkTitle = "C++"
description = "このセクションには、C++でプロトコルバッファクラスを操作するためのリファレンスドキュメントが含まれています。"
type = "docs"
+++

<p><code>#include &lt;google/protobuf/dynamic_message.h&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a></code></p><p>コンパイル時にはわからない型をエミュレートできる<a href='google.protobuf.message#Message'>Message</a>の実装を定義します。</p><table width="100%"><tr><th colspan="2"><h3 style="margin-top: 4px">このファイル内のクラス</h3></th></tr><tr><td><div><code><a href="#DynamicMessageFactory">DynamicMessageFactory</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">コンパイル時にはわからない型をエミュレートできる<a href='google.protobuf.message#Message'>Message</a>の実装を構築します。</div></td></tr><tr><td><div><code><a href="#DynamicMapSorter">DynamicMapSorter</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">リフレクションを介してマップエントリのソートされたリストを計算するためのヘルパー。</div></td></tr></table><h2 id="DynamicMessageFactory">class DynamicMessageFactory: public <a href="google.protobuf.message#MessageFactory">MessageFactory</a></h2><p><code>#include &lt;<a href="#">google/protobuf/dynamic_message.h</a>&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a></code></p><p>コンパイル時にはわからない型をエミュレートできる<a href='google.protobuf.message#Message'>Message</a>の実装を構築します。</p><p>時々、コンパイル時にわからないプロトコルの型を操作したいときがあります。任意の<a href='google.protobuf.descriptor#Descriptor'>Descriptor</a>によって与えられるメッセージタイプを実装する<a href='google.protobuf.message#Message'>Message</a>オブジェクトを構築できると便利です。DynamicMessageがこれを提供します。</p>

<p>実際、DynamicMessageは操作するために型に関する追加情報を構築する必要があります。この情報のほとんどは、同じ型のすべてのDynamicMessage間で共有できます。ただし、特定のディスクリプタのキャッシュ情報をグローバルマップに保存するのは良い考えではありません。なぜなら、特定のディスクリプタ自体よりもキャッシュされた情報の方が長生きする可能性があるからです。この問題を回避するために、<a href='#DynamicMessageFactory'>DynamicMessageFactory</a>はこの「キャッシュ」をカプセル化します。同じファクトリから作成された同じ型のすべてのDynamicMessageは同じサポートデータを共有します。特定のファクトリで使用されるすべてのディスクリプタは、ファクトリよりも長生きする必要があります。</p>
```

<table><tr><th colspan="2"><h3 style="margin-top: 4px">メンバー</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="DynamicMessageFactory.DynamicMessageFactory"><div style="padding-left: 16px; text-indent: -16px"><code><b>DynamicMessageFactory</b>()</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">定義されている<a href='#DynamicMessageFactory'>DynamicMessageFactory</a>内で拡張機能を検索する<a href='google.protobuf.descriptor#DescriptorPool'>DescriptorPool</a>を使用して<a href='#DynamicMessageFactory'>DynamicMessageFactory</a>を構築します。</div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="DynamicMessageFactory.DynamicMessageFactory"><div style="padding-left: 16px; text-indent: -16px"><code><b>DynamicMessageFactory</b>(const <a href='google.protobuf.descriptor#DescriptorPool'>DescriptorPool</a> * pool)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"><a href='#DynamicMessageFactory'>DynamicMessageFactory</a>を構築し、指定された<a href='google.protobuf.descriptor#DescriptorPool'>DescriptorPool</a>で拡張機能を検索する<a href='#DynamicMessageFactory'>DynamicMessageFactory</a>を構築します。<a href="#DynamicMessageFactory.DynamicMessageFactory.details">詳細...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="DynamicMessageFactory.~DynamicMessageFactory"><div style="padding-left: 16px; text-indent: -16px"><code><b>~DynamicMessageFactory</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="DynamicMessageFactory.SetDelegateToGeneratedFactory"><div style="padding-left: 16px; text-indent: -16px"><code><b>SetDelegateToGeneratedFactory</b>(bool enable)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"><a href='#DynamicMessageFactory'>DynamicMessageFactory</a>に対してこれを呼び出すと、<a href='google.protobuf.descriptor#Descriptor'>Descriptor</a> d が与えられた場合に、以下の条件を満たす場合：<a href="#DynamicMessageFactory.SetDelegateToGeneratedFactory.details">詳細...</a></div></td></tr><tr><th colspan="2"><h3 style="margin-top: 4px; margin-bottom: 4px;">実装<a href='google.protobuf.message#MessageFactory'>MessageFactory</a></h3><div style="font-style: italic; font-weight: normal;"></div></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>virtual const <a href='google.protobuf.message#Message'>Message</a> *</code></td><td style="border-left-width: 0px"id="DynamicMessageFactory.GetPrototype"><div style="padding-left: 16px; text-indent: -16px"><code><b>GetPrototype</b>(const <a href='google.protobuf.descriptor#Descriptor'>Descriptor</a> * type)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"><a href='google.protobuf.descriptor#Descriptor'>Descriptor</a>を指定して、そのタイプのデフォルト（プロトタイプ）<a href='google.protobuf.message#Message'>Message</a>を構築します。<a href="#DynamicMessageFactory.GetPrototype.details">詳細...</a></div></td></tr></table> <hr><h3 id="DynamicMessageFactory.DynamicMessageFactory.details"><code> DynamicMessageFactory::DynamicMessageFactory(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.descriptor#DescriptorPool'>DescriptorPool</a> * pool)</code></h3><div style="margin-left: 16px"><p><a href='#DynamicMessageFactory'>DynamicMessageFactory</a>を構築し、指定された<a href='google.protobuf.descriptor#DescriptorPool'>DescriptorPool</a>で拡張機能を検索する<a href='#DynamicMessageFactory'>DynamicMessageFactory</a>を構築します。</p><p>非推奨: CodedInputStream::SetExtensionRegistry()を使用して、パーサーに拡張機能を別のプールで検索するように指示します。ただし、これはほとんどの場合、行うべきではありません。ほとんどのユーザーはゼロ引数のコンストラクタを使用する必要があります。</p>
</div> <hr><h3 id="DynamicMessageFactory.SetDelegateToGeneratedFactory.details"><code>void DynamicMessageFactory::SetDelegateToGeneratedFactory(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool enable)</code></h3><div style="margin-left: 16px"><p><a href='#DynamicMessageFactory'>DynamicMessageFactory</a>に対してこれを呼び出すと、<a href='google.protobuf.descriptor#Descriptor'>Descriptor</a> d が与えられた場合に：</p><pre>d-&gt;file()-&gt;pool() == DescriptorPool::generated_pool(),</pre>
<p>その場合、メッセージの動的実装を構築する代わりに、<a href='google.protobuf.message#MessageFactory.generated_factory'>MessageFactory::generated_factory()</a>に委任する必要があります。理論的には、これを行うことにデメリットはないため、将来的にはデフォルトになる可能性があります。</p>
</div> <hr><h3 id="DynamicMessageFactory.GetPrototype.details"><code>virtual const <a href='google.protobuf.message#Message'>Message</a> * DynamicMessageFactory::GetPrototype(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const <a href='google.protobuf.descriptor#Descriptor'>Descriptor</a> * type)</code></h3><div style="margin-left: 16px"><p><a href='google.protobuf.descriptor#Descriptor'>Descriptor</a>を指定して、そのタイプのデフォルト（プロトタイプ）<a href='google.protobuf.message#Message'>Message</a>を構築します。</p><p>そのメッセージのNew()メソッドを呼び出して、そのタイプの変更可能なメッセージを構築できます。</p>
<p>同じ<a href='google.protobuf.descriptor#Descriptor'>Descriptor</a>でこのメソッドを2回呼び出すと、同じオブジェクトが返されます。返されたオブジェクトはファクトリの所有物であり、ファクトリが破棄されると破棄されます。また、プロトタイプのNew()メソッドを呼び出して作成されたオブジェクトは、プロトタイプと一部のデータを共有しているため、これらは<a href='#DynamicMessageFactory'>DynamicMessageFactory</a>が破棄される前に破棄する必要があります。</p>
<p>指定されたディスクリプタは、返されたメッセージよりも長く存在し、したがって<a href='#DynamicMessageFactory'>DynamicMessageFactory</a>よりも長く存在する必要があります。</p>
<p>このメソッドはスレッドセーフです。</p>
</div><h2 id="DynamicMapSorter">クラスDynamicMapSorter</h2><p><code>#include &lt;<a href="#">google/protobuf/dynamic_message.h</a>&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a></code></p><p>リフレクションを介してマップエントリのソートされたリストを計算するためのヘルパー。</p><table><tr><th colspan="2"><h3 style="margin-top: 4px">メンバー</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>static std::vector&lt; const <a href='google.protobuf.message#Message'>Message</a> * &gt;</code></td><td style="border-left-width: 0px"id="DynamicMapSorter.Sort"><div style="padding-left: 16px; text-indent: -16px"><code><b>Sort</b>(const <a href='google.protobuf.message#Message'>Message</a> &amp; message, int map_size, const <a href='google.protobuf.message#Reflection'>Reflection</a> * reflection, const <a href='google.protobuf.descriptor#FieldDescriptor'>FieldDescriptor</a> * field)</code></div></td></tr></table>

Please provide the Markdown content that you would like me to translate into Japanese.
