

+++
title = "map.h"
toc_hide = "true"
linkTitle = "C++"
description = "This section contains reference documentation for working with protocol buffer classes in C++."
type = "docs"
+++

<p><code>#include &lt;google/protobuf/map.h&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a></code></p><p>This file defines the map container and its helpers to support protobuf maps. </p><p>The <a href='#Map'>Map</a> and MapIterator types are provided by this header file. Please avoid using other types defined here, unless they are public types within <a href='#Map'>Map</a> or MapIterator, such as Map::value_type. </p>

<table width="100%"><tr><th colspan="2"><h3 style="margin-top: 4px">Classes in this file</h3></th></tr><tr><td><div><code><a href="#MapPair">MapPair</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">This is the class for <a href='#Map'>Map</a>'s internal value_type. </div></td></tr><tr><td><div><code><a href="#Map">Map</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"><a href='#Map'>Map</a> is an associative container type used to store protobuf map fields. </div></td></tr><tr><td><div><code><a href="#Map.const_iterator">Map::const_iterator</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Iterators. </div></td></tr><tr><td><div><code><a href="#Map.iterator">Map::iterator</a></code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;"></div></td></tr></table><h2 id="MapPair">template alias MapPair</h2><p><code>#include &lt;<a href="#">google/protobuf/map.h</a>&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a><br><br>template &lt;typename , typename &gt;</code></p><p>This is the class for <a href='#Map'>Map</a>'s internal value_type, which is just an alias to std::pair. </p>
<h2 id="Map">template class Map</h2><p><code>#include &lt;<a href="#">google/protobuf/map.h</a>&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a><br><br>template &lt;typename , typename &gt;</code></p><p><a href='#Map'>Map</a> is an associative container type used to store protobuf map fields. </p><p>Each <a href='#Map'>Map</a> instance may or may not use a different hash function, a different iteration order, and so on. E.g., please don't examine implementation details to decide if the following would work: Map&lt;int, int&gt; m0, m1; m0[0] = m1[0] = m0[1] = m1[1] = 0; assert(m0.begin()-&gt;first == m1.begin()-&gt;first); // Bug!</p>
<p><a href='#Map'>Map</a>'s interface is similar to std::unordered_map, except that <a href='#Map'>Map</a> is not designed to play well with exceptions. </p>
<table><tr><th colspan="2"><h3 style="margin-top: 4px">Members</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.key_type"><div style="padding-left: 16px; text-indent: -16px"><code>Key <b>key_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.mapped_type"><div style="padding-left: 16px; text-indent: -16px"><code>T <b>mapped_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.value_type"><div style="padding-left: 16px; text-indent: -16px"><code><a href='#MapPair'>MapPair</a>&lt; Key, T &gt; <b>value_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.pointer"><div style="padding-left: 16px; text-indent: -16px"><code><a href='#MapPair'>value_type</a> * <b>pointer</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.const_pointer"><div style="padding-left: 16px; text-indent: -16px"><code>const <a href='#MapPair'>value_type</a> * <b>const_pointer</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.reference"><div style="padding-left: 16px; text-indent: -16px"><code><a href='#MapPair'>value_type</a> &amp; <b>reference</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.const_reference"><div style="padding-left: 16px; text-indent: -16px"><code>const <a href='#MapPair'>value_type</a> &amp; <b>const_reference</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.size_type"><div style="padding-left: 16px; text-indent: -16px"><code>size_t <b>size_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.hasher"><div style="padding-left: 16px; text-indent: -16px"><code>typename internal::TransparentSupport&lt; Key &gt;::hash <b>hasher</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>constexpr</code></td><td style="border-left-width: 0px"id="Map.Map"><div style="padding-left: 16px; text-indent: -16px"><code><b>Map</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>explicit </code></td><td style="border-left-width: 0px"id="Map.Map"><div style="padding-left: 16px; text-indent: -16px"><code><b>Map</b>(<a href='google.protobuf.arena#Arena'>Arena</a> * arena)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="Map.Map"><div style="padding-left: 16px; text-indent: -16px"><code><b>Map</b>(const <a href='#Map'>Map</a> &amp; other)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="Map.Map"><div style="padding-left: 16px; text-indent: -16px"><code><b>Map</b>(<a href='#Map'>Map</a> &amp;&amp; other)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map'>Map</a> &amp;</code></td><td style="border-left-width: 0px"id="Map.operator="><div style="padding-left: 16px; text-indent: -16px"><code><b>operator=</b>(<a href='#Map'>Map</a> &amp;&amp; other)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template </code></td><td style="border-left-width: 0px"id="Map.Map"><div style="padding-left: 16px; text-indent: -16px"><code><b>Map</b>(const InputIt &amp; first, const InputIt &amp; last)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="Map.~Map"><div style="padding-left: 16px; text-indent: -16px"><code><b>~Map</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.iterator'>iterator</a></code></td><td style="border-left-width: 0px"id="Map.begin"><div style="padding-left: 16px; text-indent: -16px"><code><b>begin</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.iterator'>iterator</a></code></td><td style="border-left-width: 0px"id="Map.end"><div style="padding-left: 16px; text-indent: -16px"><code><b>end</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.const_iterator'>const_iterator</a></code></td><td style="border-left-width: 0px"id="Map.begin"><div style="padding-left: 16px; text-indent: -16px"><code><b>begin</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.const_iterator'>const_iterator</a></code></td><td style="border-left-width: 0px"id="Map.end"><div style="padding-left: 16px; text-indent: -16px"><code><b>end</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.const_iterator'>const_iterator</a></code></td><td style="border-left-width: 0px"id="Map.cbegin"><div style="padding-left: 16px; text-indent: -16px"><code><b>cbegin</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.const_iterator'>const_iterator</a></code></td><td style="border-left-width: 0px"id="Map.cend"><div style="padding-left: 16px; text-indent: -16px"><code><b>cend</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>size_type</code></td><td style="border-left-width: 0px"id="Map.size"><div style="padding-left: 16px; text-indent: -16px"><code><b>size</b>() const</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Capacity. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>bool</code></td><td style="border-left-width: 0px"id="Map.empty"><div style="padding-left: 16px; text-indent: -16px"><code><b>empty</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template T &amp;</code></td><td style="border-left-width: 0px"id="Map.operator[]"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator[]</b>(const key_arg&lt; K &gt; &amp; key)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Element access. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template T &amp;</code></td><td style="border-left-width: 0px"id="Map.operator[]"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator[]</b>(key_arg&lt; K &gt; &amp;&amp; key)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template const T &amp;</code></td><td style="border-left-width: 0px"id="Map.at"><div style="padding-left: 16px; text-indent: -16px"><code><b>at</b>(const key_arg&lt; K &gt; &amp; key) const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template T &amp;</code></td><td style="border-left-width: 0px"id="Map.at"><div style="padding-left: 16px; text-indent: -16px"><code><b>at</b>(const key_arg&lt; K &gt; &amp; key)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template size_type</code></td><td style="border-left-width: 0px"id="Map.count"><div style="padding-left: 16px; text-indent: -16px"><code><b>count</b>(const key_arg&lt; K &gt; &amp; key) const</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Lookup. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template <a href='#Map.const_iterator'>const_iterator</a></code></td><td style="border-left-width: 0px"id="Map.find"><div style="padding-left: 16px; text-indent: -16px"><code><b>find</b>(const key_arg&lt; K &gt; &amp; key) const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template <a href='#Map.iterator'>iterator</a></code></td><td style="border-left-width: 0px"id="Map.find"><div style="padding-left: 16px; text-indent: -16px"><code><b>find</b>(const key_arg&lt; K &gt; &amp; key)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template bool</code></td><td style="border-left-width: 0px"id="Map.contains"><div style="padding-left: 16px; text-indent: -16px"><code><b>contains</b>(const key_arg&lt; K &gt; &amp; key) const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template std::pair&lt; <a href='#Map.const_iterator'>const_iterator</a>, <a href='#Map.const_iterator'>const_iterator</a> &gt;</code></td><td style="border-left-width: 0px"id="Map.equal_range"><div style="padding-left: 16px; text-indent: -16px"><code><b>equal_range</b>(const key_arg&lt; K &gt; &amp; key) const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template std::pair&lt; <a href='#Map.iterator'>iterator</a>, <a href='#Map.iterator'>iterator</a> &gt;</code></td><td style="border-left-width: 0px"id="Map.equal_range"><div style="padding-left: 16px; text-indent: -16px"><code><b>equal_range</b>(const key_arg&lt; K &gt; &amp; key)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>std::pair&lt; <a href='#Map.iterator'>iterator</a>, bool &gt;</code></td><td style="border-left-width: 0px"id="Map.insert"><div style="padding-left: 16px; text-indent: -16px"><code><b>insert</b>(const <a href='#MapPair'>value_type</a> &amp; value)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">insert </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template void</code></td><td style="border-left-width: 0px"id="Map.insert"><div style="padding-left: 16px; text-indent: -16px"><code><b>insert</b>(InputIt first, InputIt last)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="Map.insert"><div style="padding-left: 16px; text-indent: -16px"><code><b>insert</b>(std::initializer_list&lt; <a href='#MapPair'>value_type</a> &gt; values)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>template size_type</code></td><td style="border-left-width: 0px"id="Map.erase"><div style="padding-left: 16px; text-indent: -16px"><code><b>erase</b>(const key_arg&lt; K &gt; &amp; key)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Erase and clear. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.iterator'>iterator</a></code></td><td style="border-left-width: 0px"id="Map.erase"><div style="padding-left: 16px; text-indent: -16px"><code><b>erase</b>(<a href='#Map.iterator'>iterator</a> pos)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="Map.erase"><div style="padding-left: 16px; text-indent: -16px"><code><b>erase</b>(<a href='#Map.iterator'>iterator</a> first, <a href='#Map.iterator'>iterator</a> last)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="Map.clear"><div style="padding-left: 16px; text-indent: -16px"><code><b>clear</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map'>Map</a> &amp;</code></td><td style="border-left-width: 0px"id="Map.operator="><div style="padding-left: 16px; text-indent: -16px"><code><b>operator=</b>(const <a href='#Map'>Map</a> &amp; other)</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Assign. </div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="Map.swap"><div style="padding-left: 16px; text-indent: -16px"><code><b>swap</b>(<a href='#Map'>Map</a> &amp; other)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>void</code></td><td style="border-left-width: 0px"id="Map.InternalSwap"><div style="padding-left: 16px; text-indent: -16px"><code><b>InternalSwap</b>(<a href='#Map'>Map</a> &amp; other)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>hasher</code></td><td style="border-left-width: 0px"id="Map.hash_function"><div style="padding-left: 16px; text-indent: -16px"><code><b>hash_function</b>() const</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Access to hasher.  <a href="#Map.hash_function.details">more...</a></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>size_t</code></td><td style="border-left-width: 0px"id="Map.SpaceUsedExcludingSelfLong"><div style="padding-left: 16px; text-indent: -16px"><code><b>SpaceUsedExcludingSelfLong</b>() const</code></div></td></tr></table> <hr><h3 id="Map.hash_function.details"><code>hasher Map::hash_function() const</code></h3><div style="margin-left: 16px"><p>Access to hasher. </p><p>Currently this returns a copy, but it may be modified to return a const reference in the future. </p>
</div><h2 id="Map.const_iterator">class Map::const_iterator</h2><p><code>#include &lt;<a href="#">google/protobuf/map.h</a>&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a></code></p><p>Iterators. </p><table><tr><th colspan="2"><h3 style="margin-top: 4px">Members</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.const_iterator.iterator_category"><div style="padding-left: 16px; text-indent: -16px"><code>std::forward_iterator_tag <b>iterator_category</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.const_iterator.value_type"><div style="padding-left: 16px; text-indent: -16px"><code>typename <a href='#MapPair'>Map::value_type</a> <b>value_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.const_iterator.difference_type"><div style="padding-left: 16px; text-indent: -16px"><code>ptrdiff_t <b>difference_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.const_iterator.pointer"><div style="padding-left: 16px; text-indent: -16px"><code>const value_type * <b>pointer</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.const_iterator.reference"><div style="padding-left: 16px; text-indent: -16px"><code>const value_type &amp; <b>reference</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="Map.const_iterator.const_iterator"><div style="padding-left: 16px; text-indent: -16px"><code><b>const_iterator</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>explicit </code></td><td style="border-left-width: 0px"id="Map.const_iterator.const_iterator"><div style="padding-left: 16px; text-indent: -16px"><code><b>const_iterator</b>(const InnerIt &amp; it)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#MapPair'>const_reference</a></code></td><td style="border-left-width: 0px"id="Map.const_iterator.operator*"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator*</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#MapPair'>const_pointer</a></code></td><td style="border-left-width: 0px"id="Map.const_iterator.operator->"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator-></b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.const_iterator'>const_iterator</a> &amp;</code></td><td style="border-left-width: 0px"id="Map.const_iterator.operator++"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator++</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.const_iterator'>const_iterator</a></code></td><td style="border-left-width: 0px"id="Map.const_iterator.operator++"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator++</b>(int )</code></div></td></tr></table><h2 id="Map.iterator">class Map::iterator</h2><p><code>#include &lt;<a href="#">google/protobuf/map.h</a>&gt;<br>namespace <a href="#google.protobuf">google::protobuf</a></code></p><p></p><table><tr><th colspan="2"><h3 style="margin-top: 4px">Members</h3></th></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.iterator.iterator_category"><div style="padding-left: 16px; text-indent: -16px"><code>std::forward_iterator_tag <b>iterator_category</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.iterator.value_type"><div style="padding-left: 16px; text-indent: -16px"><code>typename <a href='#MapPair'>Map::value_type</a> <b>value_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.iterator.difference_type"><div style="padding-left: 16px; text-indent: -16px"><code>ptrdiff_t <b>difference_type</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.iterator.pointer"><div style="padding-left: 16px; text-indent: -16px"><code>value_type * <b>pointer</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>typedef</code></td><td style="border-left-width: 0px"id="Map.iterator.reference"><div style="padding-left: 16px; text-indent: -16px"><code>value_type &amp; <b>reference</b></code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="Map.iterator.iterator"><div style="padding-left: 16px; text-indent: -16px"><code><b>iterator</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>explicit </code></td><td style="border-left-width: 0px"id="Map.iterator.iterator"><div style="padding-left: 16px; text-indent: -16px"><code><b>iterator</b>(const InnerIt &amp; it)</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>reference</code></td><td style="border-left-width: 0px"id="Map.iterator.operator*"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator*</b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code>pointer</code></td><td style="border-left-width: 0px"id="Map.iterator.operator->"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator-></b>() const</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.iterator'>iterator</a> &amp;</code></td><td style="border-left-width: 0px"id="Map.iterator.operator++"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator++</b>()</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code><a href='#Map.iterator'>iterator</a></code></td><td style="border-left-width: 0px"id="Map.iterator.operator++"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator++</b>(int )</code></div></td></tr><tr><td style="border-right-width: 0px; text-align: right;"><code></code></td><td style="border-left-width: 0px"id="Map.iterator.operator const_iterator"><div style="padding-left: 16px; text-indent: -16px"><code><b>operator const_iterator</b>() const</code></div><div style="font-style: italic; margin-top: 4px; margin-left: 16px;">Allow implicit conversion to <a href='#Map.const_iterator'>const_iterator</a>. </div></td></tr></table>
