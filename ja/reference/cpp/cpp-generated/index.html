<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=ja class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.121.2"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>C++ 生成コードガイド | Protocol Buffers Documentation</title>
<meta name=description content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成する C++ コードを正確に説明します。"><meta property="og:title" content="C++ 生成コードガイド"><meta property="og:description" content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成する C++ コードを正確に説明します。"><meta property="og:type" content="article"><meta property="og:url" content="https://protobuf.dev/ja/reference/cpp/cpp-generated/"><meta property="article:section" content="reference"><meta itemprop=name content="C++ 生成コードガイド"><meta itemprop=description content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成する C++ コードを正確に説明します。"><meta itemprop=wordCount content="2200"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="C++ 生成コードガイド"><meta name=twitter:description content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成する C++ コードを正確に説明します。"><link rel=preload href=/scss/main.min.6a57e8f3f347dea5d31cb48e3b4ea9fdae32d499473089bdef9b45457b5debb8.css as=style><link href=/scss/main.min.6a57e8f3f347dea5d31cb48e3b4ea9fdae32d499473089bdef9b45457b5debb8.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/ja/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/reference/cpp/cpp-generated/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder=サイトを検索... aria-label=サイトを検索... autocomplete=off></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder=サイトを検索... aria-label=サイトを検索... autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/reference/cpp/cpp-generated/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-ja-li><a href=/ja/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-ja><span>Protocol Buffers</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaoverview-li><a href=/ja/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaoverview><span>概要</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-janews-li><a href=/ja/news/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-janews><span>ニュース</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2022-05-06-li><a href=/ja/news/2022-05-06/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2022-05-06><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-07-06-li><a href=/ja/news/2023-07-06/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-07-06><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-08-09-li><a href=/ja/news/2023-08-09/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-08-09><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-08-15-li><a href=/ja/news/2023-08-15/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-08-15><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-09-15-li><a href=/ja/news/2023-09-15/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-09-15><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-12-27-li><a href=/ja/news/2023-12-27/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-12-27><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2024-06-26-li><a href=/ja/news/2024-06-26/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2024-06-26><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-japrogramming-guides-li><a href=/ja/programming-guides/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-japrogramming-guides><span>プログラミングガイド</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesproto2-li><a href=/ja/programming-guides/proto2/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesproto2><span>言語ガイド（proto 2）</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesproto3-li><a href=/ja/programming-guides/proto3/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesproto3><span>言語ガイド（proto 3）</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesstyle-li><a href=/ja/programming-guides/style/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesstyle><span>スタイルガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesaddons-li><a href=/ja/programming-guides/addons/ title=サードパーティーアドオン class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesaddons><span>アドオン</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesapi-li><a href=/ja/programming-guides/api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesapi><span>API ベストプラクティス</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesdos-donts-li><a href=/ja/programming-guides/dos-donts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesdos-donts><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesencoding-li><a href=/ja/programming-guides/encoding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesencoding><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesenum-li><a href=/ja/programming-guides/enum/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesenum><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesextension_declarations-li><a href=/ja/programming-guides/extension_declarations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesextension_declarations><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesfield_presence-li><a href=/ja/programming-guides/field_presence/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesfield_presence><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesserialization-not-canonical-li><a href=/ja/programming-guides/serialization-not-canonical/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesserialization-not-canonical><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidestechniques-li><a href=/ja/programming-guides/techniques/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidestechniques><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jaeditions-li><a href=/ja/editions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jaeditions><span>Protobuf Editions</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaeditionsoverview-li><a href=/ja/editions/overview/ title="Protobuf Editions の概要" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaeditionsoverview><span>概要</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaeditionsfeatures-li><a href=/ja/editions/features/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaeditionsfeatures><span>エディション向けの機能設定</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaeditionsimplementation-li><a href=/ja/editions/implementation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaeditionsimplementation><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jagetting-started-li><a href=/ja/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jagetting-started><span>チュートリアル</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedcpptutorial-li><a href=/ja/getting-started/cpptutorial/ title="プロトコルバッファの基礎: C++" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedcpptutorial><span>C++</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedcsharptutorial-li><a href=/ja/getting-started/csharptutorial/ title="Protocol Buffer Basics: C#" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedcsharptutorial><span>C#</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-starteddarttutorial-li><a href=/ja/getting-started/darttutorial/ title="Protocol Buffer Basics: Dart" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-starteddarttutorial><span>Dart</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedgotutorial-li><a href=/ja/getting-started/gotutorial/ title="プロトコルバッファの基本: Go" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedgotutorial><span>Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedjavatutorial-li><a href=/ja/getting-started/javatutorial/ title="プロトコルバッファの基礎: Java" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedjavatutorial><span>Java</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedkotlintutorial-li><a href=/ja/getting-started/kotlintutorial/ title="Protocol Buffer Basics: Kotlin" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedkotlintutorial><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedpythontutorial-li><a href=/ja/getting-started/pythontutorial/ title="プロトコルバッファの基礎: Python" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedpythontutorial><span>Python</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-jareference-li><a href=/ja/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareference><span>リファレンスガイド</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-jareferencecpp-li><a href=/ja/reference/cpp/ title="C++ リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencecpp><span>C++</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-jareferencecppcpp-generated-li><a href=/ja/reference/cpp/cpp-generated/ title="C++ 生成コードガイド" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-jareferencecppcpp-generated><span class=td-sidebar-nav-active-item>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecpparenas-li><a href=/ja/reference/cpp/arenas/ title="C++ アリーナ割り当てガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecpparenas><span>アリーナ割り当てガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docs-link-li><a href=/reference/cpp/api-docs/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docs-link><span>C++ API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilercpp_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.cpp_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilercpp_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.csharp_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_names-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.csharp_names/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_names><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.java_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_names-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.java_names/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_names><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjavanano_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.javanano_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjavanano_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjs_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.js_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjs_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerobjectivec_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.objectivec_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerobjectivec_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerparser-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.parser/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerparser><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerplugin-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.plugin/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerplugin><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerpluginpb-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerpluginpb><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerpython_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.python_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerpython_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerruby_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.ruby_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerruby_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufdescriptorpb-li><a href=/ja/reference/cpp/api-docs/google.protobuf.descriptor.pb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufdescriptorpb><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufdynamic_message-li><a href=/ja/reference/cpp/api-docs/google.protobuf.dynamic_message/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufdynamic_message><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutilfield_comparator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.field_comparator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutilfield_comparator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutiljson_util-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.json_util/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutiljson_util><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.type_resolver/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver_util-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.type_resolver_util/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver_util><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencecsharp-li><a href=/ja/reference/csharp/ title="C# リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencecsharp><span>C#</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecsharpcsharp-generated-li><a href=/ja/reference/csharp/csharp-generated/ title="C# 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecsharpcsharp-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecsharpapi-docs-link-li><a href=/reference/csharp/api-docs target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecsharpapi-docs-link><span>C# API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencedart-li><a href=/ja/reference/dart/ title="Dart リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencedart><span>Dart</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencedartdart-generated-li><a href=/ja/reference/dart/dart-generated/ title="Dart Generated Code" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencedartdart-generated><span>生成されたコード</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencedartapi-docs-link-li><a href=https://pub.dartlang.org/documentation/protobuf target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencedartapi-docs-link><span>Dart API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencego-li><a href=/ja/reference/go/ title=Goリファレンス class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencego><span>Go</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencegogo-generated-li><a href=/ja/reference/go/go-generated/ title="Go Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencegogo-generated><span>生成されたコードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencegoapi-docs-link-li><a href=https://pkg.go.dev/google.golang.org/protobuf/proto target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencegoapi-docs-link><span>Go API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencegofaq-li><a href=/ja/reference/go/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencegofaq><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencegosize-li><a href=/ja/reference/go/size/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencegosize><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencejava-li><a href=/ja/reference/java/ title="Java リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencejava><span>Java</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencejavajava-generated-li><a href=/ja/reference/java/java-generated/ title=Java生成コードガイド class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencejavajava-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencejavajava-proto-names-li><a href=/ja/reference/java/java-proto-names/ title="Java Proto Names" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencejavajava-proto-names><span>生成されたProto名</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencejavaapi-docs-link-li><a href=/reference/java/api-docs/overview-summary.html target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencejavaapi-docs-link><span>Java API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencekotlin-li><a href=/ja/reference/kotlin/ title="Kotlin リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencekotlin><span>Kotlin</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencekotlinapi-docs-li><a href=/ja/reference/kotlin/api-docs/ title="Kotlin リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencekotlinapi-docs><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencekotlinkotlin-generated-li><a href=/ja/reference/kotlin/kotlin-generated/ title="Kotlin 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencekotlinkotlin-generated><span>生成コードガイド</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferenceobjective-c-li><a href=/ja/reference/objective-c/ title="Objective-C リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferenceobjective-c><span>Objective-C</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceobjective-cobjective-c-generated-li><a href=/ja/reference/objective-c/objective-c-generated/ title="Objective-C 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceobjective-cobjective-c-generated><span>生成コードガイド</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencephp-li><a href=/ja/reference/php/ title="PHP リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencephp><span>PHP</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencephpphp-generated-li><a href=/ja/reference/php/php-generated/ title="PHP 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencephpphp-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencephpapi-docs-link-li><a href=/reference/php/api-docs/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencephpapi-docs-link><span>PHP API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencepython-li><a href=/ja/reference/python/ title="Python リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencepython><span>Python</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencepythonpython-generated-li><a href=/ja/reference/python/python-generated/ title="Python 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencepythonpython-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencepythonapi-docs-link-li><a href=https://googleapis.dev/python/protobuf/latest/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencepythonapi-docs-link><span>Python API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferenceruby-li><a href=/ja/reference/ruby/ title="Ruby リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferenceruby><span>Ruby</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencerubyruby-generated-li><a href=/ja/reference/ruby/ruby-generated/ title="Ruby Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencerubyruby-generated><span>生成されたコードガイド</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferenceprotobuf-li><a href=/ja/reference/protobuf/ title=プロトコルバッファリファレンス class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferenceprotobuf><span>プロトコルバッファ</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufedition-2023-spec-li><a href=/ja/reference/protobuf/edition-2023-spec/ title="Protocol Buffers Edition 2023 言語仕様" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufedition-2023-spec><span>2023 言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufproto2-spec-li><a href=/ja/reference/protobuf/proto2-spec/ title="Protocol Buffers Version 2 言語仕様" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufproto2-spec><span>Version 2 言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufproto3-spec-li><a href=/ja/reference/protobuf/proto3-spec/ title="Protocol Buffers Version 3 言語仕様" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufproto3-spec><span>Version 3 言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobuftextformat-spec-li><a href=/ja/reference/protobuf/textformat-spec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobuftextformat-spec><span>テキスト形式言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufgoogleprotobuf-li><a href=/ja/reference/protobuf/google.protobuf/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufgoogleprotobuf><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceother-li><a href=/ja/reference/other/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceother><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jasupport-li><a href=/ja/support/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jasupport><span>サポート</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasupportversion-support-li><a href=/ja/support/version-support/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasupportversion-support><span>バージョンサポート</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasupportcross-version-runtime-guarantee-li><a href=/ja/support/cross-version-runtime-guarantee/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasupportcross-version-runtime-guarantee><span>クロスバージョンランタイム保証</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasupportmigration-li><a href=/ja/support/migration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasupportmigration><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaforum-link-li><a href=https://groups.google.com/g/protobuf target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaforum-link><span>フォーラム</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jadownloads-li><a href=/ja/downloads/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jadownloads><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jahistory-li><a href=/ja/history/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jahistory><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janavbar-li><a href=/ja/navbar/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janavbar><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasearch-li><a href=/ja/search/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasearch><span>検索結果</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/protocolbuffers/protocolbuffers.github.io/tree/main/content/reference/cpp/cpp-generated.ja.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/protocolbuffers/protocolbuffers.github.io/edit/main/content/reference/cpp/cpp-generated.ja.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> ページの編集</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/new/main/content/reference/cpp/cpp-generated.ja.md?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 子ページを作成</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/issues/new?title=C++%20%e7%94%9f%e6%88%90%e3%82%b3%e3%83%bc%e3%83%89%e3%82%ac%e3%82%a4%e3%83%89" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> ドキュメントのissueを作成</a>
<a href=https://github.com/protocolbuffers/protobuf/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> プロジェクトのissueを作成</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#invocation>コンパイラの呼び出し</a></li><li><a href=#package>パッケージ</a></li><li><a href=#message>メッセージ</a><ul><li><a href=#nested-types>ネストされた型</a></li></ul></li><li><a href=#fields>フィールド</a><ul><li><a href=#numeric>オプションの数値フィールド（proto2およびproto3）</a></li><li><a href=#implicit-numeric>暗黙の存在数値フィールド（proto3）</a></li><li><a href=#string>オプションの文字列/バイトフィールド（proto2 および proto3）</a></li><li><a href=#implicit-string>暗黙の存在文字列/バイトフィールド（proto3）</a></li><li><a href=#cord>Singular Bytes Fields with Cord Support</a></li><li><a href=#enum_field>Optional Enum Fields (proto2 and proto3)</a></li><li><a href=#implicit-enum>暗黙の存在エンムフィールド（proto3）</a></li><li><a href=#embeddedmessage>オプションの埋め込みメッセージフィールド（proto2およびproto3）</a></li><li><a href=#repeatednumeric>繰り返し数値フィールド</a></li><li><a href=#repeatedstring>繰り返し文字列フィールド</a></li><li><a href=#repeated_enum>繰り返し列挙フィールド</a></li><li><a href=#repeatedmessage>繰り返し埋め込みメッセージフィールド</a></li><li><a href=#oneof-numeric>数値フィールドの Oneof</a></li><li><a href=#oneof-string>文字列フィールドの Oneof</a></li><li><a href=#oneof-enum>Oneof Enum Fields</a></li><li><a href=#oneof-embedded>Oneof Embedded Message Fields</a></li><li><a href=#map>フィールドのマッピング</a></li></ul></li><li><a href=#any>Any</a></li><li><a href=#oneof>Oneof</a></li><li><a href=#enum>Enumerations</a></li><li><a href=#extension>拡張機能（proto2のみ）</a></li><li><a href=#arena>アリーナ割り当て</a></li><li><a href=#service>サービス</a><ul><li><a href=#インターフェース>インターフェース</a></li><li><a href=#stub>Stub</a></li></ul></li><li><a href=#plugins>プラグイン挿入ポイント</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://protobuf.dev/ja/reference/>リファレンスガイド</a></li><li class=breadcrumb-item><a href=https://protobuf.dev/ja/reference/cpp/>C++</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://protobuf.dev/ja/reference/cpp/cpp-generated/ aria-disabled=true class="btn-link disabled">生成コードガイド</a></li></ol></nav><div class=td-content><h1>C++ 生成コードガイド</h1><div class=lead>任意のプロトコル定義に対してプロトコルバッファコンパイラが生成する C++ コードを正確に説明します。</div><header class=article-meta></header><p>proto2 と proto3 で生成されるコードの違いは強調されています - これらの違いは、このドキュメントで説明されている生成されたコードにありますが、ベースのメッセージクラス/インターフェースは両バージョンで同じです。
このドキュメントを読む前に、
<a href=/programming-guides/proto2>proto2 言語ガイド</a>
および/または
<a href=/programming-guides/proto3>proto3 言語ガイド</a>
を読むべきです。</p><h2 id=invocation>コンパイラの呼び出し</h2><p>プロトコルバッファコンパイラは、<code>--cpp_out=</code> コマンドラインフラグを使用して呼び出されるときに C++ 出力を生成します。<code>--cpp_out=</code> オプションのパラメータは、コンパイラが C++ 出力を書き込むディレクトリです。コンパイラは、各 <code>.proto</code> ファイルの入力に対してヘッダーファイルと実装ファイルを作成します。出力ファイルの名前は、<code>.proto</code> ファイルの名前を取り、次の 2 つの変更を加えて計算されます:</p><ul><li>拡張子（<code>.proto</code>）は、ヘッダーファイルまたは実装ファイルに対してそれぞれ <code>.pb.h</code> または <code>.pb.cc</code> に置き換えられます。</li><li>proto パス（<code>--proto_path=</code> または <code>-I</code> コマンドラインフラグで指定）は、出力パス（<code>--cpp_out=</code> フラグで指定）に置き換えられます。</li></ul><p>例えば、次のようにコンパイラを呼び出すとします:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --cpp_out<span style=color:#ce5c00;font-weight:700>=</span>build/gen src/foo.proto src/bar/baz.proto
</span></span></code></pre></div><p>コンパイラはファイル <code>src/foo.proto</code> と <code>src/bar/baz.proto</code> を読み込み、4 つの出力ファイルを生成します: <code>build/gen/foo.pb.h</code>, <code>build/gen/foo.pb.cc</code>, <code>build/gen/bar/baz.pb.h</code>, <code>build/gen/bar/baz.pb.cc</code>。コンパイラは必要に応じてディレクトリ <code>build/gen/bar</code> を自動的に作成しますが、<code>build</code> または <code>build/gen</code> は作成しません。それらはすでに存在している必要があります。</p><h2 id=package>パッケージ</h2><p><code>.proto</code> ファイルに <code>package</code> 宣言が含まれている場合、ファイル全体が対応する C++ 名前空間に配置されます。例えば、次の <code>package</code> 宣言がある場合:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>foo</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>ファイル内のすべての宣言は <code>foo::bar</code> ネームスペースに存在します。</p><h2 id=message>メッセージ</h2><p>単純なメッセージ宣言が与えられた場合:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>プロトコルバッファコンパイラは <code>Foo</code> というクラスを生成します。このクラスは
<a href=/reference/cpp/api-docs/google.protobuf.message><code>google::protobuf::Message</code></a>
を公開的に継承します。このクラスは具象クラスであり、純粋仮想メソッドは未実装のままです。
<code>Message</code> で仮想的なメソッドであるが純粋仮想ではないメソッドは、最適化モードに応じて
<code>Foo</code> によってオーバーライドされるかどうかが異なります。デフォルトでは、<code>Foo</code> は最大の速度を実現するためにすべてのメソッドの専用バージョンを実装します。ただし、<code>.proto</code> ファイルに次の行が含まれている場合:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>CODE_SIZE</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>その場合、<code>Foo</code> は機能するために必要な最小限のメソッドセットのみをオーバーライドし、残りのメソッドにはリフレクションベースの実装を依存します。これにより生成されるコードのサイズが大幅に削減されますが、パフォーマンスも低下します。
また、<code>.proto</code> ファイルに次の行が含まれている場合:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>optimize_for</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>LITE_RUNTIME</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>その場合、<code>Foo</code> はすべてのメソッドの高速な実装を含みますが、
<a href=/reference/cpp/api-docs/google.protobuf.message_lite><code>google::protobuf::MessageLite</code></a>
インターフェースを実装します。このインターフェースには <code>Message</code> の一部のメソッドしか含まれておらず、記述子やリフレクションをサポートしません。ただし、このモードでは生成されたコードは <code>libprotobuf-lite.so</code>
(<code>libprotobuf.lib</code> は Windows 用) にリンクする必要があります。&ldquo;lite&rdquo; ライブラリはフルライブラリよりもはるかに小さく、モバイル電話などのリソースに制約のあるシステムに適しています。</p><p>独自の <code>Foo</code> サブクラスを作成すべきではありません。このクラスをサブクラス化して仮想メソッドをオーバーライドすると、オーバーライドが無視される可能性があります。多くの生成されたメソッド呼び出しはパフォーマンスを向上させるために仮想化解除されるためです。</p><p><code>Message</code> インターフェースは、バイナリ文字列からのパースやシリアライズを含む、メッセージ全体のチェック、操作、読み取り、書き込みを行うメソッドを定義します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#204a87;font-weight:700>bool</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ParseFromString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>data</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>指定されたシリアライズされたバイナリ文字列（ワイヤーフォーマットとも呼ばれる）からメッセージをパースします。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#204a87;font-weight:700>bool</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>SerializeToString</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>output</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>const</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>指定されたメッセージをバイナリ文字列にシリアライズします。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>DebugString</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>proto</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>の</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>text_format</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>表現を返す文字列を返します（デバッグ目的でのみ使用するべきです）。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#a40000>これらのメソッドに加えて、</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>クラスは以下のメソッドを定義しています</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>デフォルトコンストラクタ。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`~</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>デフォルトデストラクタ。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>other</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>コピーコンストラクタ。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>&amp;&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>other</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>ムーブコンストラクタ。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>operator</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>other</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>代入演算子。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>operator</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>&amp;&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>other</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>ムーブ代入演算子。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>void</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Swap</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>other</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>別のメッセージと内容を交換します。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>const</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>UnknownFieldSet</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>unknown_fields</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>const</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>このメッセージをパースする際に遭遇した未知のフィールドのセットを返します。</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>proto</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>ファイルで</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#204a87;font-weight:700>option</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>optimize_for</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>LITE_RUNTIME</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>が指定されている場合、戻り値の型が</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>std</span><span style=color:#000;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>に変わります。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>UnknownFieldSet</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>mutable_unknown_fields</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>このメッセージをパースする際に遭遇した未知のフィールドのセットへのポインタを返します。</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>proto</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>ファイルで</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#204a87;font-weight:700>option</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>optimize_for</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>LITE_RUNTIME</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>が指定されている場合、戻り値の型が</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>std</span><span style=color:#000;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>に変わります。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#a40000>このクラスは以下の静的メソッドも定義しています</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>const</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Descriptor</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>descriptor</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>タイプの記述子を返します。これには、フィールドの情報やその型などが含まれています。これは</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#000>reflection</span><span style=color:#000;font-weight:700>](</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>reference</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>cpp</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>api</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>docs</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>google</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>protobuf</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>message</span><span style=color:#8f5902;font-style:italic>#Reflection) と組み合わせてフィールドをプログラムで調査するために使用できます。{/*examples*/}
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>static</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>const</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>default_instance</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>の</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>const</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>シングルトンインスタンスを返します。これは新しく構築された</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>Foo</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>インスタンスと同一であり、すべての単一フィールドが未設定であり、すべての繰り返しフィールドが空です。メッセージのデフォルトインスタンスは、その</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#000>New</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>`</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>メソッドを呼び出すことでファクトリとして使用できます。{</span><span style=color:#8f5902;font-style:italic>/*examples*/</span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>### 生成されたファイル名 {#generated-filenames}
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>[</span><span style=color:#a40000>予約語</span><span style=color:#000;font-weight:700>](</span><span style=color:#000>https</span><span style=color:#000;font-weight:700>:</span><span style=color:#ce5c00;font-weight:700>//</span><span style=color:#000>github</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>com</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>protocolbuffers</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#204a87;font-weight:700>blob</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>main</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>src</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>compiler</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>cpp</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>helpers</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>cc</span><span style=color:#8f5902;font-style:italic>#L4)
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#a40000>は生成された出力にアンダースコアが付加されます。</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#a40000>たとえば、次の</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>proto3</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>定義構文</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#ce5c00;font-weight:700>```</span><span style=color:#000>proto</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000>message</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>MyMessage</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#a40000>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>false</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>myFalse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#a40000>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>は次の部分的な出力を生成します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear_false_</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>false_</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_false_</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Arg_</span><span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>arg</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Args_</span><span style=color:#000;font-weight:700>...</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>mutable_false_</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>PROTOBUF_NODISCARD</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>release_false_</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_allocated_false_</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>ptr</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear_myfalse</span><span style=color:#000;font-weight:700>()</span> <span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>myfalse</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_myfalse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Arg_</span><span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#000>arg</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Args_</span><span style=color:#000;font-weight:700>...</span> <span style=color:#000>args</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>mutable_myfalse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>PROTOBUF_NODISCARD</span> <span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>release_myfalse</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>set_allocated_myfalse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>ptr</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h3 id=nested-types>ネストされた型</h3><p>メッセージは別のメッセージの内部で宣言されることができます。たとえば:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>この場合、コンパイラは <code>Foo</code> と <code>Foo_Bar</code> の2つのクラスを生成します。さらに、コンパイラは <code>Foo</code> の内部に次のように typedef を生成します:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Foo_Bar</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p>これにより、ネストされた型のクラスを、ネストされたクラス <code>Foo::Bar</code> であるかのように使用できます。ただし、C++ ではネストされた型を前方宣言することはできません。別のファイルで <code>Bar</code> を前方宣言してその宣言を使用したい場合は、<code>Foo_Bar</code> として識別する必要があります。</p><h2 id=fields>フィールド</h2><p>前のセクションで説明されたメソッドに加えて、プロトコルバッファコンパイラは、<code>.proto</code> ファイル内で定義された各フィールドに対して一連のアクセサメソッドを生成します。これらのメソッドは、<code>has_foo()</code> や <code>clear_foo()</code> などの小文字/スネークケースで表記されます。</p><p>アクセサメソッドだけでなく、コンパイラは各フィールドに対して整数定数を生成し、そのフィールド番号を含めます。定数名は、<code>k</code> という文字に続いてキャメルケースに変換されたフィールド名、そして <code>FieldNumber</code> が続きます。たとえば、<code>optional int32 foo_bar = 5;</code> というフィールドが与えられた場合、コンパイラは定数 <code>static const int kFooBarFieldNumber = 5;</code> を生成します。</p><p><code>const</code> 参照を返すフィールドアクセサについては、その参照は、メッセージへの次の変更アクセスが行われると無効になる可能性があります。これには、任意のフィールドの非 <code>const</code> アクセサを呼び出すこと、<code>Message</code> から継承された任意の非 <code>const</code> メソッドを呼び出すこと、または他の方法でメッセージを変更すること（たとえば、<code>Swap()</code> の引数としてメッセージを使用すること）が含まれます。同様に、返された参照のアドレスは、メッセージへの次の変更アクセスが行われない限り、異なる呼び出し間で同じであることが保証されます。</p><p>フィールドアクセサーがポインタを返す場合、そのポインタは、メッセージへの次の変更または非変更アクセスが行われると無効になる可能性があります。これには、constnessに関係なく、任意のフィールドのアクセサーの呼び出し、<code>Message</code>から継承された任意のメソッドの呼び出し、または他の方法でメッセージにアクセスすること（たとえば、コピーコンストラクタを使用してメッセージをコピーすること）が含まれます。同様に、返されたポインタの値は、アクセサーの2つの異なる呼び出し間で常に同じであることは保証されません。</p><h3 id=numeric>オプションの数値フィールド（proto2およびproto3）</h3><p>次のいずれかのフィールド定義の場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサーメソッドを生成します：</p><ul><li><code>bool has_foo() const</code>：フィールドが設定されている場合は<code>true</code>を返します。</li><li><code>int32 foo() const</code>：フィールドの現在の値を返します。フィールドが設定されていない場合はデフォルト値を返します。</li><li><code>void set_foo(int32 value)</code>：フィールドの値を設定します。これを呼び出した後、<code>has_foo()</code>は<code>true</code>を返し、<code>foo()</code>は<code>value</code>を返します。</li><li><code>void clear_foo()</code>：フィールドの値をクリアします。これを呼び出した後、<code>has_foo()</code>は<code>false</code>を返し、<code>foo()</code>はデフォルト値を返します。</li></ul><p>その他の数値フィールドタイプ（<code>bool</code>を含む）については、<code>int32</code>は、<a href=/programming-guides/proto3#scalar>スカラー値タイプテーブル</a>に従って対応するC++タイプに置き換えられます。</p><h3 id=implicit-numeric>暗黙の存在数値フィールド（proto3）</h3><p>次のフィールド定義の場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// フィールドラベルが指定されていない場合、暗黙の存在にデフォルトで設定されます。
</span></span></span></code></pre></div><p>コンパイラは次のアクセサーメソッドを生成します：</p><ul><li><code>int32 foo() const</code>：フィールドの現在の値を返します。フィールドが設定されていない場合は0を返します。</li><li><code>void set_foo(int32 value)</code>：フィールドの値を設定します。これを呼び出した後、<code>foo()</code>は<code>value</code>を返します。</li><li><code>void clear_foo()</code>：フィールドの値をクリアします。これを呼び出した後、<code>foo()</code>は0を返します。</li></ul><p>その他の数値フィールドタイプ（<code>bool</code>を含む）については、<code>int32</code>は、<a href=/programming-guides/proto3#scalar>スカラー値タイプテーブル</a>に従って対応するC++タイプに置き換えられます。</p><h3 id=string>オプションの文字列/バイトフィールド（proto2 および proto3）</h3><p>次のいずれかのフィールド定義に対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します：</p><ul><li><code>bool has_foo() const</code>: フィールドが設定されている場合は <code>true</code> を返します。</li><li><code>const string& foo() const</code>: フィールドの現在の値を返します。フィールドが設定されていない場合はデフォルト値を返します。</li><li><code>void set_foo(const string& value)</code>: フィールドの値を設定します。これを呼び出した後、<code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> のコピーを返します。</li><li><code>void set_foo(string&& value)</code>（C++11 以降）: フィールドの値を設定し、渡された文字列から移動します。これを呼び出した後、<code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> のコピーを返します。</li><li><code>void set_foo(const char* value)</code>: C スタイルのヌル終端文字列を使用してフィールドの値を設定します。これを呼び出した後、<code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> のコピーを返します。</li><li><code>void set_foo(const char* value, int size)</code>: 上記と同様ですが、文字列のサイズが明示的に指定され、ヌル終端バイトを探す代わりに決定されます。</li><li><code>string* mutable_foo()</code>: フィールドの値を格納する可変 <code>string</code> オブジェクトへのポインタを返します。呼び出し前にフィールドが設定されていない場合、返される文字列は空になります（デフォルト値ではありません）。これを呼び出した後、<code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は指定された文字列に書き込まれた値を返します。</li><li><code>void clear_foo()</code>: フィールドの値をクリアします。これを呼び出した後、<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返します。</li><li><code>void set_allocated_foo(string* value)</code>: <code>string</code> オブジェクトをフィールドに設定し、以前のフィールド値を解放します。<code>string</code> ポインタが <code>NULL</code> でない場合、メッセージは割り当てられた <code>string</code> オブジェクトの所有権を取得し、<code>has_foo()</code> は <code>true</code> を返します。メッセージはいつでも割り当てられた <code>string</code> オブジェクトを削除することができるため、オブジェクトへの参照は無効になる可能性があります。それ以外の場合、<code>value</code> が <code>NULL</code> の場合、動作は <code>clear_foo()</code> を呼び出すのと同じです。</li><li><code>string* release_foo()</code>: フィールドの所有権を解放し、<code>string</code> オブジェクトのポインタを返します。これを呼び出した後、呼び出し元が割り当てられた <code>string</code> オブジェクトの所有権を取得し、<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返します。</li></ul><p><a id=proto3_string></a></p><h3 id=implicit-string>暗黙の存在文字列/バイトフィールド（proto3）</h3><p>次のいずれかのフィールド定義に対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// no field label specified, defaults to implicit presence.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します：</p><ul><li><code>const string& foo() const</code>: フィールドの現在の値を返します。フィールドが設定されていない場合は、空の文字列/空のバイトを返します。</li><li><code>void set_foo(const string& value)</code>: フィールドの値を設定します。これを呼び出した後、<code>foo()</code> は <code>value</code> のコピーを返します。</li><li><code>void set_foo(string&& value)</code>（C++11以降）: フィールドの値を設定し、渡された文字列から移動します。これを呼び出した後、<code>foo()</code> は <code>value</code> のコピーを返します。</li><li><code>void set_foo(const char* value)</code>: Cスタイルのヌル終端文字列を使用してフィールドの値を設定します。これを呼び出した後、<code>foo()</code> は <code>value</code> のコピーを返します。</li><li><code>void set_foo(const char* value, int size)</code>: 上記と同様ですが、文字列のサイズが明示的に指定され、ヌル終端バイトを探す代わりに決定されます。</li><li><code>string* mutable_foo()</code>: フィールドの値を格納する可変 <code>string</code> オブジェクトへのポインタを返します。呼び出し前にフィールドが設定されていない場合、返される文字列は空になります。これを呼び出した後、<code>foo()</code> は指定された文字列に書き込まれた値を返します。</li><li><code>void clear_foo()</code>: フィールドの値をクリアします。これを呼び出した後、<code>foo()</code> は空の文字列/空のバイトを返します。</li><li><code>void set_allocated_foo(string* value)</code>: <code>string</code> オブジェクトをフィールドに設定し、以前のフィールド値を解放します。<code>string</code> ポインタが <code>NULL</code> でない場合、メッセージは割り当てられた <code>string</code> オブジェクトの所有権を取ります。メッセージはいつでも割り当てられた <code>string</code> オブジェクトを削除することができるため、オブジェクトへの参照は無効になる可能性があります。それ以外の場合、<code>value</code> が <code>NULL</code> の場合、動作は <code>clear_foo()</code> を呼び出すのと同じです。</li><li><code>string* release_foo()</code>: フィールドの所有権を解放し、<code>string</code> オブジェクトのポインタを返します。これを呼び出した後、呼び出し元が割り当てられた <code>string</code> オブジェクトの所有権を取り、<code>foo()</code> は空の文字列/空のバイトを返します。</li></ul><h3 id=cord>Singular Bytes Fields with Cord Support</h3><p>v23.0 では、単一の <code>bytes</code> フィールド（<a href=#oneof-numeric><code>oneof</code> フィールド</a>を含む）に対して<a href=https://github.com/abseil/abseil-cpp/blob/master/absl/strings/cord.h><code>absl::Cord</code></a> をサポートする機能が追加されました。<code>Cord</code> は、単一の <code>string</code>、<code>repeated string</code>、<code>repeated bytes</code> フィールドでは使用できません。</p><p><code>absl::Cord</code> を使用してデータを格納するために単一の <code>bytes</code> フィールドを設定するには、次の構文を使用します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>25</span> <span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>ctype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>CORD</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>26</span> <span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>ctype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>CORD</span><span style=color:#000;font-weight:700>];</span><span style=color:#a40000>
</span></span></span></code></pre></div><p><code>repeated bytes</code> フィールドには <code>cord</code> を使用することはできません。これらのフィールドに対して <code>[ctype=CORD]</code> 設定を行っても、Protoc は無視します。</p><p>コンパイラは、次のアクセサメソッドを生成します：</p><ul><li><code>const ::absl::Cord& foo() const</code>：フィールドの現在の値を返します。フィールドが設定されていない場合は、空の <code>Cord</code>（proto3）またはデフォルト値（proto2）を返します。</li><li><code>void set_foo(const ::absl::Cord& value)</code>：フィールドの値を設定します。これを呼び出した後、<code>foo()</code> は <code>value</code> を返します。</li><li><code>void set_foo(::absl::string_view value)</code>：フィールドの値を設定します。これを呼び出した後、<code>foo()</code> は <code>absl::Cord</code> として <code>value</code> を返します。</li><li><code>void clear_foo()</code>：フィールドの値をクリアします。これを呼び出した後、<code>foo()</code> は空の <code>Cord</code>（proto3）またはデフォルト値（proto2）を返します。</li><li><code>bool has_foo()</code>：フィールドが設定されている場合は <code>true</code> を返します。</li></ul><h3 id=enum_field>Optional Enum Fields (proto2 and proto3)</h3><p>次の列挙型が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>次のいずれかのフィールド定義に対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは、次のアクセサメソッドを生成します：</p><ul><li><code>bool has_foo() const</code>：フィールドが設定されている場合は <code>true</code> を返します。</li><li><code>Bar foo() const</code>：フィールドの現在の値を返します。フィールドが設定されていない場合はデフォルト値を返します。</li><li><code>void set_foo(Bar value)</code>：フィールドの値を設定します。これを呼び出した後、<code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> を返します。デバッグモード（つまり、<code>NDEBUG</code> が定義されていない場合）では、<code>value</code> が <code>Bar</code> に定義された値と一致しない場合、このメソッドはプロセスを中止します。</li><li><code>void clear_foo()</code>：フィールドの値をクリアします。これを呼び出した後、<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返します。</li></ul><h3 id=implicit-enum>暗黙の存在エンムフィールド（proto3）</h3><p>Enumタイプが与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>次のフィールド定義に対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// フィールドラベルが指定されていないため、暗黙の存在にデフォルトします。
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します：</p><ul><li><code>Bar foo() const</code>：フィールドの現在の値を返します。フィールドが設定されていない場合、デフォルト値（0）を返します。</li><li><code>void set_foo(Bar value)</code>：フィールドの値を設定します。これを呼び出した後、<code>foo()</code>は<code>value</code>を返します。</li><li><code>void clear_foo()</code>：フィールドの値をクリアします。これを呼び出した後、<code>foo()</code>はデフォルト値を返します。</li></ul><h3 id=embeddedmessage>オプションの埋め込みメッセージフィールド（proto2およびproto3）</h3><p>メッセージタイプが与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>次のフィールド定義のいずれかに対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>//proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>//proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します：</p><ul><li><code>bool has_foo() const</code>：フィールドが設定されている場合は<code>true</code>を返します。</li><li><code>const Bar& foo() const</code>：フィールドの現在の値を返します。フィールドが設定されていない場合、フィールドの値が設定されていない<code>Bar</code>を返します（おそらく<code>Bar::default_instance()</code>）。</li><li><code>Bar* mutable_foo()</code>：フィールドの値を格納する可変<code>Bar</code>オブジェクトへのポインタを返します。呼び出し前にフィールドが設定されていない場合、返される<code>Bar</code>にはフィールドの値が設定されていない（つまり、新しく割り当てられた<code>Bar</code>と同じになります）。これを呼び出した後、<code>has_foo()</code>は<code>true</code>を返し、<code>foo()</code>は<code>Bar</code>の同じインスタンスへの参照を返します。</li><li><code>void clear_foo()</code>：フィールドの値をクリアします。これを呼び出した後、<code>has_foo()</code>は<code>false</code>を返し、<code>foo()</code>はデフォルト値を返します。</li><li><code>void set_allocated_foo(Bar* bar)</code>：<code>Bar</code>オブジェクトをフィールドに設定し、以前のフィールド値を解放します。<code>Bar</code>ポインタが<code>NULL</code>でない場合、メッセージは割り当てられた<code>Bar</code>オブジェクトの所有権を取得し、<code>has_foo()</code>は<code>true</code>を返します。それ以外の場合、<code>Bar</code>が<code>NULL</code>である場合、動作は<code>clear_foo()</code>を呼び出すのと同じです。</li><li><code>Bar* release_foo()</code>：フィールドの所有権を解放し、<code>Bar</code>オブジェクトのポインタを返します。これを呼び出した後、呼び出し元が割り当てられた<code>Bar</code>オブジェクトの所有権を取得し、<code>has_foo()</code>は<code>false</code>を返し、<code>foo()</code>はデフォルト値を返します。</li></ul><h3 id=repeatednumeric>繰り返し数値フィールド</h3><p>このフィールド定義に対して:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します:</p><ul><li><code>int foo_size() const</code>: 現在のフィールド内の要素数を返します。空のセットをチェックするには、このメソッドではなく、基礎となる<code>RepeatedField</code>内の<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a>メソッドを使用してください。</li><li><code>int32 foo(int index) const</code>: 指定されたゼロベースのインデックスの要素を返します。インデックスが[0, foo_size())の範囲外の場合、未定義の動作が発生します。</li><li><code>void set_foo(int index, int32 value)</code>: 指定されたゼロベースのインデックスの要素の値を設定します。</li><li><code>void add_foo(int32 value)</code>: フィールドの末尾に指定された値の新しい要素を追加します。</li><li><code>void clear_foo()</code>: フィールドからすべての要素を削除します。これを呼び出した後、<code>foo_size()</code>はゼロを返します。</li><li><code>const RepeatedField&lt;int32>& foo() const</code>: フィールドの要素を格納する基礎となる<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedField><code>RepeatedField</code></a>を返します。このコンテナクラスはSTL風のイテレータやその他のメソッドを提供します。</li><li><code>RepeatedField&lt;int32>* mutable_foo()</code>: フィールドの要素を格納する基礎となる変更可能な<code>RepeatedField</code>へのポインタを返します。このコンテナクラスはSTL風のイテレータやその他のメソッドを提供します。</li></ul><p>他の数値フィールドタイプ（<code>bool</code>を含む）については、<code>int32</code>は<a href=/programming-guides/proto2#scalar>スカラー値の種類の表</a>に従って対応するC++タイプに置き換えられます。</p><h3 id=repeatedstring>繰り返し文字列フィールド</h3><p>次のいずれかのフィールド定義に対して:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します:</p><ul><li><code>int foo_size() const</code>: 現在のフィールド内の要素数を返します。空のセットをチェックするには、このメソッドではなく、基礎となる<code>RepeatedField</code>内の<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a>メソッドを使用してください。</li><li><code>const string& foo(int index) const</code>: 指定されたゼロベースのインデックスの要素を返します。インデックスが[0, foo_size()-1]の範囲外の場合、未定義の動作が発生します。</li><li><code>void set_foo(int index, const string& value)</code>: 指定されたゼロベースのインデックスの要素の値を設定します。</li><li><code>void set_foo(int index, const char* value)</code>: Cスタイルのヌル終端文字列を使用して、指定されたゼロベースのインデックスの要素の値を設定します。</li><li><code>void set_foo(int index, const char* value, int size)</code>: 上記と同様ですが、文字列のサイズがヌル終端バイトを探すことなく明示的に指定されます。</li><li><code>string* mutable_foo(int index)</code>: 指定されたゼロベースのインデックスの要素の値を格納する変更可能な<code>string</code>オブジェクトへのポインタを返します。インデックスが[0, foo_size())の範囲外の場合、未定義の動作が発生します。</li><li><code>void add_foo(const string& value)</code>: フィールドの末尾に指定された値の新しい要素を追加します。</li><li><code>void add_foo(const char* value)</code>: Cスタイルのヌル終端文字列を使用して、フィールドの末尾に新しい要素を追加します。</li><li><code>void add_foo(const char* value, int size)</code>: 上記と同様ですが、文字列のサイズがヌル終端バイトを探すことなく明示的に指定されます。</li><li><code>string* add_foo()</code>: フィールドの末尾に新しい空の文字列要素を追加し、そのポインタを返します。</li><li><code>void clear_foo()</code>: フィールドからすべての要素を削除します。これを呼び出した後、<code>foo_size()</code>はゼロを返します。</li><li><code>const RepeatedPtrField&lt;string>& foo() const</code>: フィールドの要素を格納する基礎となる<a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>RepeatedPtrField</code></a>を返します。このコンテナクラスはSTL風のイテレータやその他のメソッドを提供します。</li><li><code>RepeatedPtrField&lt;string>* mutable_foo()</code>: フィールドの要素を格納する基礎となる変更可能な<code>RepeatedPtrField</code>へのポインタを返します。このコンテナクラスはSTL風のイテレータやその他のメソッドを提供します。</li></ul><h3 id=repeated_enum>繰り返し列挙フィールド</h3><p>列挙型が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>このフィールド定義に対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します：</p><ul><li><code>int foo_size() const</code>: 現在のフィールド内の要素数を返します。空のセットをチェックするには、このメソッドではなく、基礎となる <code>RepeatedField</code> の <a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a> メソッドを使用してください。</li><li><code>Bar foo(int index) const</code>: 指定されたゼロベースのインデックスの要素を返します。インデックスが [0, foo_size()) の範囲外の場合、未定義の動作が発生します。</li><li><code>void set_foo(int index, Bar value)</code>: 指定されたゼロベースのインデックスの要素の値を設定します。デバッグモード（つまり、<code>NDEBUG</code> が定義されていない場合）では、<code>value</code> が <code>Bar</code> に定義されている値と一致しない場合、このメソッドはプロセスを中止します。</li><li><code>void add_foo(Bar value)</code>: フィールドの末尾に新しい要素を追加し、指定された値を設定します。デバッグモード（つまり、<code>NDEBUG</code> が定義されていない場合）では、<code>value</code> が <code>Bar</code> に定義されている値と一致しない場合、このメソッドはプロセスを中止します。</li><li><code>void clear_foo()</code>: フィールドからすべての要素を削除します。これを呼び出した後、<code>foo_size()</code> はゼロを返します。</li><li><code>const RepeatedField&lt;int>& foo() const</code>: フィールドの要素を格納する基礎となる <a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedField><code>RepeatedField</code></a> を返します。このコンテナクラスは、STL風のイテレータやその他のメソッドを提供します。</li><li><code>RepeatedField&lt;int>* mutable_foo()</code>: フィールドの要素を格納する変更可能な基礎となる <code>RepeatedField</code> へのポインタを返します。このコンテナクラスは、STL風のイテレータやその他のメソッドを提供します。</li></ul><h3 id=repeatedmessage>繰り返し埋め込みメッセージフィールド</h3><p>メッセージ型が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>このフィールド定義に対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します：</p><ul><li><code>int foo_size() const</code>: 現在のフィールド内の要素数を返します。空のセットをチェックするには、このメソッドではなく、基礎となる <code>RepeatedField</code> の <a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>empty()</code></a> メソッドを使用してください。</li><li><code>const Bar& foo(int index) const</code>: 指定されたゼロベースのインデックスの要素を返します。インデックスが [0, foo_size()) の範囲外の場合、未定義の動作が発生します。</li><li><code>Bar* mutable_foo(int index)</code>: 指定されたゼロベースのインデックスの要素の値を格納する変更可能な <code>Bar</code> オブジェクトへのポインタを返します。インデックスが [0, foo_size()) の範囲外の場合、未定義の動作が発生します。</li><li><code>Bar* add_foo()</code>: フィールドの末尾に新しい要素を追加し、そのポインタを返します。返される <code>Bar</code> は変更可能であり、そのフィールドは設定されていません（つまり、新しく割り当てられた <code>Bar</code> と同じ状態です）。</li><li><code>void clear_foo()</code>: フィールドからすべての要素を削除します。これを呼び出した後、<code>foo_size()</code> はゼロを返します。</li><li><code>const RepeatedPtrField&lt;Bar>& foo() const</code>: フィールドの要素を格納する基礎となる <a href=/reference/cpp/api-docs/google.protobuf.repeated_field#RepeatedPtrField><code>RepeatedPtrField</code></a> を返します。このコンテナクラスは、STL風のイテレータやその他のメソッドを提供します。</li><li><code>RepeatedPtrField&lt;Bar>* mutable_foo()</code>: フィールドの要素を格納する変更可能な基礎となる <code>RepeatedPtrField</code> へのポインタを返します。このコンテナクラスは、STL風のイテレータやその他のメソッドを提供します。</li></ul><h3 id=oneof-numeric>数値フィールドの Oneof</h3><p>この <a href=#oneof>oneof</a> フィールドの定義に対して:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します:</p><ul><li><code>bool has_foo() const</code>: <code>kFoo</code> の oneof ケースがある場合は <code>true</code> を返します。</li><li><code>int32 foo() const</code>: oneof ケースが <code>kFoo</code> の場合はフィールドの現在の値を返し、そうでない場合はデフォルト値を返します。</li><li><code>void set_foo(int32 value)</code>:<ul><li>同じ oneof 内の他の oneof フィールドが設定されている場合は、<code>clear_example_name()</code> を呼び出します。</li><li>このフィールドの値を設定し、oneof ケースを <code>kFoo</code> に設定します。</li><li><code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> を返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li></ul></li><li><code>void clear_foo()</code>:<ul><li>oneof ケースが <code>kFoo</code> でない場合は何も変更されません。</li><li>oneof ケースが <code>kFoo</code> の場合、フィールドの値と oneof ケースをクリアします。
<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します。</li></ul></li></ul><p>その他の数値フィールドタイプ（<code>bool</code> を含む）については、<code>int32</code> は
<a href=/programming-guides/proto3#scalar>scalar value types table</a> に従って対応する C++ タイプに置き換えられます。</p><h3 id=oneof-string>文字列フィールドの Oneof</h3><p>これらの <a href=#oneof>oneof</a> フィールドの定義のいずれかに対して:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のアクセサメソッドを生成します:</p><ul><li><code>bool has_foo() const</code>: oneof ケースが <code>kFoo</code> の場合は <code>true</code> を返します。</li><li><code>const string& foo() const</code>: oneof ケースが <code>kFoo</code> の場合はフィールドの現在の値を返し、そうでない場合はデフォルト値を返します。</li><li><code>void set_foo(const string& value)</code>:<ul><li>同じ oneof 内の他の oneof フィールドが設定されている場合は、<code>clear_example_name()</code> を呼び出します。</li><li>このフィールドの値を設定し、oneof ケースを <code>kFoo</code> に設定します。</li><li><code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> のコピーを返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li></ul></li><li><code>void set_foo(const char* value)</code>:<ul><li>同じ oneof 内の他の oneof フィールドが設定されている場合は、<code>clear_example_name()</code> を呼び出します。</li><li>C スタイルのヌル終端文字列を使用してフィールドの値を設定し、oneof ケースを <code>kFoo</code> に設定します。</li><li><code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> のコピーを返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li></ul></li><li><code>void set_foo(const char* value, int size)</code>: 上記と同様ですが、文字列のサイズが明示的に与えられ、ヌル終端バイトを探す代わりに決定されます。</li><li><code>string* mutable_foo()</code>:<ul><li>同じ oneof 内の他の oneof フィールドが設定されている場合は、<code>clear_example_name()</code> を呼び出します。</li><li>oneof ケースを <code>kFoo</code> に設定し、フィールドの値を格納する可変文字列オブジェクトへのポインタを返します。呼び出し前に oneof ケースが <code>kFoo</code> でない場合、返される文字列は空になります（デフォルト値ではありません）。</li><li><code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は指定された文字列に書き込まれた値を返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li></ul></li><li><code>void clear_foo()</code>:<ul><li>oneof ケースが <code>kFoo</code> でない場合は何も変更されません。</li><li>oneof ケースが <code>kFoo</code> の場合、フィールドを解放し、oneof ケースをクリアします。
<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します。</li></ul></li><li><code>void set_allocated_foo(string* value)</code>:<ul><li><code>clear_example_name()</code> を呼び出します。</li><li>文字列ポインタが <code>NULL</code> でない場合: 文字列オブジェクトをフィールドに設定し、oneof ケースを <code>kFoo</code> に設定します。メッセージは割り当てられた文字列オブジェクトの所有権を取得し、<code>has_foo()</code> は <code>true</code> を返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li><li>文字列ポインタが <code>NULL</code> の場合、<code>has_foo()</code> は <code>false</code> を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します。</li></ul></li><li><code>string* release_foo()</code>:<ul><li>oneof ケースが <code>kFoo</code> でない場合は <code>NULL</code> を返します。</li><li>oneof ケースをクリアし、フィールドの所有権を解放し、文字列オブジェクトのポインタを返します。これを呼び出した後、呼び出し元が割り当てられた文字列オブジェクトの所有権を取得し、<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します。</li></ul></li></ul><h3 id=oneof-enum>Oneof Enum Fields</h3><p>与えられた列挙型：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>BAR_OTHER_VALUE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p><a href=#oneof>oneof</a> フィールドの定義：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは以下のアクセサメソッドを生成します：</p><ul><li><code>bool has_foo() const</code>: <code>kFoo</code> の oneof ケースがある場合は <code>true</code> を返します。</li><li><code>Bar foo() const</code>: oneof ケースが <code>kFoo</code> の場合はフィールドの現在の値を返し、それ以外の場合はデフォルト値を返します。</li><li><code>void set_foo(Bar value)</code>:<ul><li>同じ oneof 内の他のフィールドが設定されている場合、<code>clear_example_name()</code> を呼び出します。</li><li>このフィールドの値を設定し、oneof ケースを <code>kFoo</code> に設定します。</li><li><code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>value</code> を返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li><li>デバッグモード（つまり、NDEBUG が定義されていない場合）では、<code>value</code> が <code>Bar</code> に定義されている値と一致しない場合、このメソッドはプロセスを中止します。</li></ul></li><li><code>void clear_foo()</code>:<ul><li>oneof ケースが <code>kFoo</code> でない場合は何も変更されません。</li><li>oneof ケースが <code>kFoo</code> の場合、フィールドの値と oneof ケースをクリアします。<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します。</li></ul></li></ul><h3 id=oneof-embedded>Oneof Embedded Message Fields</h3><p>与えられたメッセージ型：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Bar</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p><a href=#oneof>oneof</a> フィールドの定義：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>Bar</span> <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは以下のアクセサメソッドを生成します：</p><ul><li><code>bool has_foo() const</code>: oneof ケースが <code>kFoo</code> の場合は <code>true</code> を返します。</li><li><code>const Bar& foo() const</code>: oneof ケースが <code>kFoo</code> の場合はフィールドの現在の値を返し、それ以外の場合はフィールドが設定されていない Bar を返します（おそらく <code>Bar::default_instance()</code>）。</li><li><code>Bar* mutable_foo()</code>:<ul><li>同じ oneof 内の他のフィールドが設定されている場合、<code>clear_example_name()</code> を呼び出します。</li><li>oneof ケースを <code>kFoo</code> に設定し、フィールドの値を格納する mutable Bar オブジェクトへのポインタを返します。呼び出し前の oneof ケースが <code>kFoo</code> でない場合、返された Bar はフィールドが設定されていない状態になります（つまり、新しく割り当てられた Bar と同じ状態になります）。</li><li>これを呼び出した後、<code>has_foo()</code> は <code>true</code> を返し、<code>foo()</code> は <code>Bar</code> の同じインスタンスへの参照を返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li></ul></li><li><code>void clear_foo()</code>:<ul><li>oneof ケースが <code>kFoo</code> でない場合は何も変更されません。</li><li>oneof ケースが <code>kFoo</code> の場合、フィールドを解放し、oneof ケースをクリアします。<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します。</li></ul></li><li><code>void set_allocated_foo(Bar* bar)</code>:<ul><li><code>clear_example_name()</code> を呼び出します。</li><li><code>Bar</code> ポインタが <code>NULL</code> でない場合：<code>Bar</code> オブジェクトをフィールドに設定し、oneof ケースを <code>kFoo</code> に設定します。メッセージは割り当てられた <code>Bar</code> オブジェクトの所有権を取得し、<code>has_foo()</code> は <code>true</code> を返し、<code>example_name_case()</code> は <code>kFoo</code> を返します。</li><li>ポインタが <code>NULL</code> の場合、<code>has_foo()</code> は <code>false</code> を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します（動作は <code>clear_example_name()</code> を呼び出すのと同様です）。</li></ul></li><li><code>Bar* release_foo()</code>:<ul><li>oneof ケースが <code>kFoo</code> の場合は <code>NULL</code> を返します。</li><li>oneof ケースが <code>kFoo</code> の場合、oneof ケースをクリアし、フィールドの所有権を解放し、<code>Bar</code> オブジェクトのポインタを返します。これを呼び出した後、呼び出し元が割り当てられた <code>Bar</code> オブジェクトの所有権を取得し、<code>has_foo()</code> は <code>false</code> を返し、<code>foo()</code> はデフォルト値を返し、<code>example_name_case()</code> は <code>EXAMPLE_NAME_NOT_SET</code> を返します。</li></ul></li></ul><h3 id=map>フィールドのマッピング</h3><p>このマップフィールドの定義について:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>weight</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは以下のアクセサメソッドを生成します:</p><ul><li><code>const google::protobuf::Map&lt;int32, int32>& weight();</code>: 変更不可な<code>Map</code>を返します。</li><li><code>google::protobuf::Map&lt;int32, int32>* mutable_weight();</code>: 変更可能な<code>Map</code>を返します。</li></ul><p><a href=/reference/cpp/api-docs/google.protobuf.map><code>google::protobuf::Map</code></a>は、プロトコルバッファで使用される特別なコンテナ型で、マップフィールドを格納するために使用されます。以下のインターフェースからわかるように、<code>std::map</code>と<code>std::unordered_map</code>の一般的に使用されるサブセットのメソッドを使用しています。</p><p><strong>注意:</strong> これらのマップは順序付けられていません。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Map</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Member types
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>Key</span> <span style=color:#000>key_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>T</span> <span style=color:#000>mapped_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>typedef</span> <span style=color:#000>MapPair</span><span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>T</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>value_type</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Iterators
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>begin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cbegin</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>end</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>cend</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Capacity
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>size</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>empty</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Element access
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>at</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Lookup
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>contains</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>const_iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>find</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Modifiers
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>pair</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>iterator</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>bool</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>value_type</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>InputIt</span><span style=color:#ce5c00;font-weight:700>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>insert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>InputIt</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>InputIt</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>size_type</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>Key</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>iterator</span> <span style=color:#000>erase</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>const_iterator</span> <span style=color:#000>first</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>const_iterator</span> <span style=color:#000>last</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>clear</span><span style=color:#000;font-weight:700>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Copy
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>Map</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>other</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>データを追加する最も簡単な方法は、通常のマップ構文を使用することです。例:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>unique_ptr</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>ProtoName</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>my_enclosing_proto</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>ProtoName</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>my_enclosing_proto</span><span style=color:#ce5c00;font-weight:700>-&gt;</span><span style=color:#000>mutable_weight</span><span style=color:#000;font-weight:700>())[</span><span style=color:#000>my_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>my_value</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><p><code>pair&lt;iterator, bool> insert(const value_type& value)</code>は、<code>value_type</code>インスタンスのディープコピーを暗黙的に引き起こします。<code>google::protobuf::Map</code>に新しい値を挿入する最も効率的な方法は次のとおりです:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#204a87;font-weight:700>operator</span><span style=color:#000;font-weight:700>[](</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>Key</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>new_key</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>new_mapped</span><span style=color:#000;font-weight:700>;</span>
</span></span></code></pre></div><h4 id=protobuf-map>標準マップと<code>google::protobuf::Map</code>の使用</h4><p><code>google::protobuf::Map</code>は<code>std::map</code>および<code>std::unordered_map</code>と同じイテレータAPIをサポートしています。直接<code>google::protobuf::Map</code>を使用したくない場合は、次のようにして<code>google::protobuf::Map</code>を標準マップに変換できます:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>std</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span>
</span></span><span style=display:flex><span>                                    <span style=color:#000>message</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>weight</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><p>これにより、マップ全体のディープコピーが作成されます。</p><p>また、次のようにして標準マップから<code>google::protobuf::Map</code>を構築することもできます:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Map</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>int32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>int32</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>weight</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>begin</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>standard_map</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>end</span><span style=color:#000;font-weight:700>());</span>
</span></span></code></pre></div><h4 id=parsing-unknown>未知の値の解析</h4><p>ワイヤ上では、.protoマップは各キー/値ペアに対してマップエントリメッセージと等価であり、マップ自体はマップエントリの繰り返しフィールドです。通常のメッセージタイプと同様に、解析されたマップエントリメッセージには未知のフィールドが存在する可能性があります: たとえば、<code>map&lt;int32, string></code>と定義されたマップ内の<code>int64</code>型のフィールド。</p><p>マップエントリメッセージのワイヤーフォーマットに不明なフィールドがある場合、それらは破棄されます。</p><p>マップエントリメッセージのワイヤーフォーマットに不明な列挙値がある場合、proto2とproto3では異なる方法で処理されます。proto2では、マップエントリメッセージ全体が含まれるメッセージの不明なフィールドセットに配置されます。proto3では、既知の列挙値であるかのようにマップフィールドに配置されます。</p><h2 id=any>Any</h2><p>次のような<a href=/programming-guides/proto3#any><code>Any</code></a>フィールドが与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;google/protobuf/any.proto&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>ErrorStatus</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>string</span> <span style=color:#204a87;font-weight:700>message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>google.protobuf.Any</span> <span style=color:#000>details</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>生成されたコードでは、<code>details</code>フィールドのゲッターは<code>google::protobuf::Any</code>のインスタンスを返します。これには、<code>Any</code>の値をパックおよびアンパックするための次の特別なメソッドが提供されます：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Any</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span> <span style=color:#204a87;font-weight:700>public</span><span style=color:#ce5c00;font-weight:700>:</span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the default type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix “type.googleapis.com”. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Packs the given message into this Any using the given type URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// prefix. Returns false if serializing the message failed.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>PackFrom</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>string</span><span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#000>type_url_prefix</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Unpacks this Any to a Message. Returns false if this Any
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// represents a different protobuf type or parsing fails.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>UnpackTo</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>google</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>protobuf</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>Message</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>message</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#8f5902;font-style:italic>// Returns true if this Any represents the given protobuf type.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>template</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>typename</span> <span style=color:#000>T</span><span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#204a87;font-weight:700>bool</span> <span style=color:#000>Is</span><span style=color:#000;font-weight:700>()</span> <span style=color:#204a87;font-weight:700>const</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=oneof>Oneof</h2><p>次のようなoneof定義が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>example_name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>foo_int</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>foo_string</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次のC++列挙型を生成します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>ExampleNameCase</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooInt</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>kFooString</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#000>EXAMPLE_NAME_NOT_SET</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>さらに、次のメソッドが生成されます：</p><ul><li><code>ExampleNameCase example_name_case() const</code>：設定されているフィールドを示す列挙型を返します。どれも設定されていない場合は<code>EXAMPLE_NAME_NOT_SET</code>を返します。</li><li><code>void clear_example_name()</code>：oneofフィールドセットがポインタ（MessageまたはString）を使用している場合、オブジェクトを解放し、oneofケースを<code>EXAMPLE_NAME_NOT_SET</code>に設定します。</li></ul><h2 id=enum>Enumerations</h2><p>次のような列挙型定義が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_A</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_B</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>VALUE_C</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1234</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>プロトコルバッファコンパイラは、同じ値のセットを持つC++列挙型<code>Foo</code>を生成します。さらに、コンパイラは次の関数を生成します：</p><ul><li><code>const EnumDescriptor* Foo_descriptor()</code>：この列挙型が定義する値に関する情報を含む型の記述子を返します。</li><li><code>bool Foo_IsValid(int value)</code>：与えられた数値が<code>Foo</code>の定義された値のいずれかと一致する場合は<code>true</code>を返します。上記の例では、入力が0、5、または1234の場合に<code>true</code>を返します。</li><li><code>const string& Foo_Name(int value)</code>：指定された数値に対する名前を返します。そのような値が存在しない場合は空の文字列を返します。複数の値がこの数値を持つ場合、最初に定義された値が返されます。上記の例では、<code>Foo_Name(5)</code>は<code>"VALUE_B"</code>を返します。</li><li><code>bool Foo_Parse(const string& name, Foo* value)</code>：<code>name</code>がこの列挙型の有効な値名である場合、その値を<code>value</code>に割り当てて<code>true</code>を返します。それ以外の場合は<code>false</code>を返します。上記の例では、<code>Foo_Parse("VALUE_C", &amp;some_foo)</code>は<code>true</code>を返し、<code>some_foo</code>を1234に設定します。</li><li><code>const Foo Foo_MIN</code>：列挙型の最小有効値（例ではVALUE_A）。</li><li><code>const Foo Foo_MAX</code>：列挙型の最大有効値（例ではVALUE_C）。</li><li><code>const int Foo_ARRAYSIZE</code>：常に<code>Foo_MAX + 1</code>として定義されます。</li></ul><p><strong>proto2の列挙型へ整数をキャストする際には注意してください。</strong> 整数がproto2の列挙型値にキャストされる場合、その整数はその列挙型の有効な値の1つでなければなりません。そうでない場合、結果は未定義になる可能性があります。疑わしい場合は、生成された<code>Foo_IsValid()</code>関数を使用してキャストが有効かどうかをテストしてください。proto2メッセージの列挙型フィールドを無効な値に設定すると、アサーションの失敗が発生する可能性があります。proto2メッセージを解析する際に無効な列挙値が読み取られた場合、それは<a href=/reference/cpp/api-docs/google.protobuf.unknown_field_set>unknown field</a>として扱われます。これらのセマンティクスはproto3で変更されています。int32に収まる限り、任意の整数をproto3の列挙型値に安全にキャストできます。無効な列挙値も、proto3メッセージを解析する際に保持され、列挙型フィールドアクセサによって返されます。</p><p><strong>switch文でproto3の列挙型を使用する際には注意してください。</strong> Proto3の列挙型は、指定されたシンボルの範囲外の可能な値を持つオープンな列挙型です。認識されない列挙値は、proto3メッセージを解析する際に保持され、列挙型フィールドアクセサによって返されます。デフォルトケースのないproto3列挙型のswitch文は、既知のすべてのフィールドがリストされていても、すべてのケースをキャッチすることができません。これは、データの破損やランタイムクラッシュを含む予期しない動作を引き起こす可能性があります。<strong>常にデフォルトケースを追加するか、スイッチの外で<code>Foo_IsValid(int)</code>を明示的に呼び出して未知の列挙値を処理してください。</strong></p><p>メッセージ型内で列挙型を定義することができます。この場合、プロトコルバッファコンパイラは、列挙型自体がメッセージクラスのネストされた内部で宣言されたかのように見えるコードを生成します。<code>Foo_descriptor()</code>および<code>Foo_IsValid()</code>関数は静的メソッドとして宣言されます。実際には、列挙型自体とその値はグローバルスコープでマングルされた名前で宣言され、typedefと一連の定数定義を使用してクラスのスコープにインポートされます。これは、宣言の順序付けの問題を回避するためにのみ行われます。マングルされたトップレベルの名前に依存しないでください。列挙型は本当にメッセージクラスにネストされていると仮定してください。</p><h2 id=extension>拡張機能（proto2のみ）</h2><p>与えられた拡張範囲を持つメッセージがある場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extensions</span> <span style=color:#0000cf;font-weight:700>100</span> <span style=color:#204a87;font-weight:700>to</span> <span style=color:#0000cf;font-weight:700>199</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>プロトコルバッファコンパイラは、<code>Foo</code>に対していくつかの追加メソッドを生成します：
<code>HasExtension()</code>、<code>ExtensionSize()</code>、<code>ClearExtension()</code>、<code>GetExtension()</code>、
<code>SetExtension()</code>、<code>MutableExtension()</code>、<code>AddExtension()</code>、
<code>SetAllocatedExtension()</code>、<code>ReleaseExtension()</code>。これらのメソッドの各々は、
拡張フィールドを識別する拡張識別子（後述）を最初のパラメータとして取ります。
残りのパラメータと戻り値は、拡張識別子の型と同じ型の通常の（非拡張）フィールドに
対して生成される対応するアクセサメソッドのものとまったく同じです。
（<code>GetExtension()</code>は特別な接頭辞のないアクセサに対応します。）</p><p>拡張定義が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>repeated_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Bar</span> <span style=color:#000>message_bar</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>125</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>単数の拡張フィールド <code>bar</code> の場合、プロトコルバッファコンパイラは
<code>bar</code> と呼ばれる &ldquo;拡張識別子&rdquo; を生成します。これを使用して、この拡張に
アクセスするために <code>Foo</code> の拡張アクセサを使用できます。以下のように：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ClearExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>!</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HasExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bar</span><span style=color:#000;font-weight:700>));</span>
</span></span></code></pre></div><p>メッセージ拡張フィールド <code>message_bar</code> の場合、フィールドが設定されていない場合、
<code>foo.GetExtension(message_bar)</code> は、そのフィールドのいずれも設定されていない
<code>Bar</code> を返します（おそらく <code>Bar::default_instance()</code>）。</p><p>同様に、繰り返しの拡張フィールド <code>repeated_bar</code> の場合、コンパイラは
<code>repeated_bar</code> と呼ばれる拡張識別子を生成し、これも <code>Foo</code> の拡張アクセサで
使用できます：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>AddExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ExtensionSize</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> <span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>int</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span> <span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>kSize</span><span style=color:#000;font-weight:700>;</span> <span style=color:#ce5c00;font-weight:700>++</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>assert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>repeated_bar</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#000>i</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>（拡張識別子の正確な実装は複雑で、テンプレートの魔法的な使用を含みますが、
拡張識別子がどのように機能するかを気にする必要はありません。）</p><p>拡張は別の型の中にネストして宣言することができます。例えば、次のような一般的な
パターンがあります：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Baz</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Baz</span> <span style=color:#000>foo_ext</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>この場合、拡張識別子 <code>foo_ext</code> は <code>Baz</code> の中にネストして宣言されています。
以下のように使用できます：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#000>Foo</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>;</span>
</span></span><span style=display:flex><span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>baz</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>foo</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>MutableExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Baz</span><span style=color:#ce5c00;font-weight:700>::</span><span style=color:#000>foo_ext</span><span style=color:#000;font-weight:700>);</span>
</span></span><span style=display:flex><span><span style=color:#000>FillInMyBaz</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>baz</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><h2 id=arena>アリーナ割り当て</h2><p>アリーナ割り当ては、プロトコルバッファを使用する際にメモリ使用量を最適化し、パフォーマンスを向上させるためのC++専用機能です。<code>.proto</code> でアリーナ割り当てを有効にすると、生成されたC++コードにアリーナを使用するための追加コードが追加されます。アリーナ割り当て API について詳しくは、<a href=/reference/cpp/arenas>アリーナ割り当てガイド</a> を参照してください。</p><h2 id=service>サービス</h2><p><code>.proto</code> ファイルに以下の行が含まれている場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>true</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>その場合、プロトコルバッファコンパイラは、このセクションで説明されているサービス定義に基づいてコードを生成します。ただし、生成されたコードは、特定の RPC システムに結びついていないため、1 つのシステムに適したコードよりも間接参照が多く必要となる可能性があります。このコードを生成したくない場合は、ファイルに次の行を追加してください：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>cc_generic_services</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>false</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>上記のいずれの行も指定されていない場合、オプションは <code>false</code> にデフォルトで設定されます。汎用サービスは非推奨です。（2.4.0 より前では、オプションは <code>true</code> にデフォルトで設定されます）</p><p><code>.proto</code> 言語のサービス定義に基づく RPC システムは、システムに適したコードを生成するための<a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>プラグイン</a>を提供する必要があります。これらのプラグインは、抽象サービスが無効になっていることを要求する可能性が高く、そのために自分自身の同じ名前のクラスを生成できます。</p><p>このセクションの残りの部分では、抽象サービスが有効になっている場合にプロトコルバッファコンパイラが生成する内容について説明します。</p><h3 id=インターフェース>インターフェース</h3><p>サービス定義が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>service</span> <span style=color:#000>Foo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>rpc</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooRequest</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>returns</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>FooResponse</span><span style=color:#000;font-weight:700>);</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>プロトコルバッファコンパイラは、このサービスを表すクラス <code>Foo</code> を生成します。<code>Foo</code> には、サービス定義で定義された各メソッドに対応する仮想メソッドがあります。この場合、メソッド <code>Bar</code> は次のように定義されています：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#204a87;font-weight:700>virtual</span> <span style=color:#204a87;font-weight:700>void</span> <span style=color:#000>Bar</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>RpcController</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>controller</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87;font-weight:700>const</span> <span style=color:#000>FooRequest</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>request</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>                 <span style=color:#000>FooResponse</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>response</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>Closure</span><span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>done</span><span style=color:#000;font-weight:700>);</span>
</span></span></code></pre></div><p>これらのパラメータは、<code>Service::CallMethod()</code> のパラメータと同等ですが、<code>method</code> 引数は暗黙的であり、<code>request</code> と <code>response</code> は正確な型を指定しています。</p><p>これらの生成されたメソッドは仮想的ですが、純粋仮想ではありません。デフォルトの実装は単に、そのメソッドが未実装であることを示すエラーメッセージを使用して<code>controller->SetFailed()</code>を呼び出し、その後<code>done</code>コールバックを実行します。独自のサービスを実装する際には、この生成されたサービスをサブクラス化し、適切にメソッドを実装する必要があります。</p><p><code>Foo</code>は<code>Service</code>インターフェースをサブクラス化します。プロトコルバッファコンパイラは、<code>Service</code>のメソッドの実装を自動的に生成します。</p><ul><li><code>GetDescriptor</code>: サービスの<a href=/reference/cpp/api-docs/google.protobuf.descriptor#ServiceDescriptor><code>ServiceDescriptor</code></a>を返します。</li><li><code>CallMethod</code>: 提供されたメソッド記述子に基づいて呼び出されているメソッドを決定し、リクエストとレスポンスメッセージオブジェクトを正しい型にダウンキャストして直接呼び出します。</li><li><code>GetRequestPrototype</code>および<code>GetResponsePrototype</code>: 指定されたメソッドに対して適切な型のリクエストまたはレスポンスのデフォルトインスタンスを返します。</li></ul><p>以下の静的メソッドも生成されます。</p><ul><li><code>static ServiceDescriptor descriptor()</code>: この型の記述子を返します。この記述子には、このサービスがどのメソッドを持ち、それらの入力および出力の型が何であるかに関する情報が含まれています。</li></ul><h3 id=stub>Stub</h3><p>プロトコルバッファコンパイラは、サービスインターフェースごとに「スタブ」実装も生成します。これは、サービスを実装するサーバーにリクエストを送信したいクライアントが使用します。<code>Foo</code>サービス（上記）の場合、スタブ実装<code>Foo_Stub</code>が定義されます。ネストされたメッセージタイプと同様に、<code>Foo_Stub</code>を<code>Foo::Stub</code>として参照できるようにtypedefが使用されます。</p><p><code>Foo_Stub</code>は、以下のメソッドも実装する<code>Foo</code>のサブクラスです。</p><ul><li><code>Foo_Stub(RpcChannel* channel)</code>: 指定されたチャンネルにリクエストを送信する新しいスタブを構築します。</li><li><code>Foo_Stub(RpcChannel* channel, ChannelOwnership ownership)</code>: 指定されたチャンネルにリクエストを送信し、可能であればそのチャンネルを所有する新しいスタブを構築します。<code>ownership</code>が<code>Service::STUB_OWNS_CHANNEL</code>の場合、スタブオブジェクトが削除されると、チャンネルも削除されます。</li><li><code>RpcChannel* channel()</code>: このスタブのチャンネルを返します。これはコンストラクタに渡されたものです。</li></ul><p>スタブは、チャンネルをラッパーとして使用して、サービスの各メソッドを実装します。メソッドの1つを呼び出すと、単純に<code>channel->CallMethod()</code>が呼び出されます。</p><p>Protocol BufferライブラリにはRPCの実装が含まれていません。ただし、生成されたサービスクラスを任意のRPC実装に接続するために必要なツールはすべて含まれています。<a href=/reference/cpp/api-docs/google.protobuf.service#RpcChannel><code>RpcChannel</code></a>と<a href=/reference/cpp/api-docs/google.protobuf.service#RpcController><code>RpcController</code></a>の実装を提供するだけです。詳細については、<a href=/reference/cpp/api-docs/google.protobuf.service><code>service.h</code></a>のドキュメントを参照してください。</p><h2 id=plugins>プラグイン挿入ポイント</h2><p><a href=/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb>C++コードジェネレータの出力を拡張したいコードジェネレータプラグイン</a>は、指定された挿入ポイント名を使用して次のタイプのコードを挿入できます。各挿入ポイントは、それ以外の場合を除いて<code>.pb.cc</code>ファイルと<code>.pb.h</code>ファイルの両方に表示されます。</p><ul><li><code>includes</code>: インクルードディレクティブ。</li><li><code>namespace_scope</code>: ファイルのパッケージ/名前空間に属する宣言ですが、特定のクラス内にはありません。他のすべての名前空間スコープのコードの後に表示されます。</li><li><code>global_scope</code>: ファイルの名前空間の外側にあるトップレベルに属する宣言です。ファイルの最後に表示されます。</li><li><code>class_scope:TYPENAME</code>: メッセージクラスに属するメンバー宣言です。<code>TYPENAME</code>は完全なproto名です。例：<code>package.MessageType</code>。この挿入ポイントは、クラス内の他のすべての公開宣言の後に表示されます。この挿入ポイントは<code>.pb.h</code>ファイルにのみ表示されます。</li></ul><p>Protocol Buffersの将来のバージョンでこれらの実装の詳細が変更される可能性があるため、標準コードジェネレータによって宣言されたプライベートクラスメンバーに依存するコードを生成しないでください。</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2024 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>プライバシーポリシー</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.ba08a6b7f24e657f0a1b9b55be3a3162585168cd862ace0957f5b44e6cb6dc61.js integrity="sha256-ugimt/JOZX8KG5tVvjoxYlhRaM2GKs4JV/W0Tmy23GE=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>