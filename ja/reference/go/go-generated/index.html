<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=ja class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.121.2"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Go Generated Code Guide | Protocol Buffers Documentation</title>
<meta name=description content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成するGoコードを正確に説明します。"><meta property="og:title" content="Go Generated Code Guide"><meta property="og:description" content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成するGoコードを正確に説明します。"><meta property="og:type" content="article"><meta property="og:url" content="https://protobuf.dev/ja/reference/go/go-generated/"><meta property="article:section" content="reference"><meta itemprop=name content="Go Generated Code Guide"><meta itemprop=description content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成するGoコードを正確に説明します。"><meta itemprop=wordCount content="843"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Go Generated Code Guide"><meta name=twitter:description content="任意のプロトコル定義に対してプロトコルバッファコンパイラが生成するGoコードを正確に説明します。"><link rel=preload href=/scss/main.min.6a57e8f3f347dea5d31cb48e3b4ea9fdae32d499473089bdef9b45457b5debb8.css as=style><link href=/scss/main.min.6a57e8f3f347dea5d31cb48e3b4ea9fdae32d499473089bdef9b45457b5debb8.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-5L8P8GRN4Y"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-5L8P8GRN4Y")}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/ja/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Protocol Buffers Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/reference/go/go-generated/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder=サイトを検索... aria-label=サイトを検索... autocomplete=off></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder=サイトを検索... aria-label=サイトを検索... autocomplete=off></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>日本語</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/reference/go/go-generated/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-ja-li><a href=/ja/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-ja><span>Protocol Buffers</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaoverview-li><a href=/ja/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaoverview><span>概要</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-janews-li><a href=/ja/news/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-janews><span>ニュース</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2022-05-06-li><a href=/ja/news/2022-05-06/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2022-05-06><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-07-06-li><a href=/ja/news/2023-07-06/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-07-06><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-08-09-li><a href=/ja/news/2023-08-09/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-08-09><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-08-15-li><a href=/ja/news/2023-08-15/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-08-15><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-09-15-li><a href=/ja/news/2023-09-15/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-09-15><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2023-12-27-li><a href=/ja/news/2023-12-27/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2023-12-27><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janews2024-06-26-li><a href=/ja/news/2024-06-26/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janews2024-06-26><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-japrogramming-guides-li><a href=/ja/programming-guides/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-japrogramming-guides><span>プログラミングガイド</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesproto2-li><a href=/ja/programming-guides/proto2/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesproto2><span>言語ガイド（proto 2）</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesproto3-li><a href=/ja/programming-guides/proto3/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesproto3><span>言語ガイド（proto 3）</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesstyle-li><a href=/ja/programming-guides/style/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesstyle><span>スタイルガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesaddons-li><a href=/ja/programming-guides/addons/ title=サードパーティーアドオン class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesaddons><span>アドオン</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesapi-li><a href=/ja/programming-guides/api/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesapi><span>API ベストプラクティス</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesdos-donts-li><a href=/ja/programming-guides/dos-donts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesdos-donts><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesencoding-li><a href=/ja/programming-guides/encoding/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesencoding><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesenum-li><a href=/ja/programming-guides/enum/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesenum><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesextension_declarations-li><a href=/ja/programming-guides/extension_declarations/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesextension_declarations><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesfield_presence-li><a href=/ja/programming-guides/field_presence/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesfield_presence><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidesserialization-not-canonical-li><a href=/ja/programming-guides/serialization-not-canonical/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidesserialization-not-canonical><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-japrogramming-guidestechniques-li><a href=/ja/programming-guides/techniques/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-japrogramming-guidestechniques><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jaeditions-li><a href=/ja/editions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jaeditions><span>Protobuf Editions</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaeditionsoverview-li><a href=/ja/editions/overview/ title="Protobuf Editions の概要" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaeditionsoverview><span>概要</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaeditionsfeatures-li><a href=/ja/editions/features/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaeditionsfeatures><span>エディション向けの機能設定</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaeditionsimplementation-li><a href=/ja/editions/implementation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaeditionsimplementation><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jagetting-started-li><a href=/ja/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jagetting-started><span>チュートリアル</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedcpptutorial-li><a href=/ja/getting-started/cpptutorial/ title="プロトコルバッファの基礎: C++" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedcpptutorial><span>C++</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedcsharptutorial-li><a href=/ja/getting-started/csharptutorial/ title="Protocol Buffer Basics: C#" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedcsharptutorial><span>C#</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-starteddarttutorial-li><a href=/ja/getting-started/darttutorial/ title="Protocol Buffer Basics: Dart" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-starteddarttutorial><span>Dart</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedgotutorial-li><a href=/ja/getting-started/gotutorial/ title="プロトコルバッファの基本: Go" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedgotutorial><span>Go</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedjavatutorial-li><a href=/ja/getting-started/javatutorial/ title="プロトコルバッファの基礎: Java" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedjavatutorial><span>Java</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedkotlintutorial-li><a href=/ja/getting-started/kotlintutorial/ title="Protocol Buffer Basics: Kotlin" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedkotlintutorial><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jagetting-startedpythontutorial-li><a href=/ja/getting-started/pythontutorial/ title="プロトコルバッファの基礎: Python" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jagetting-startedpythontutorial><span>Python</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-jareference-li><a href=/ja/reference/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareference><span>リファレンスガイド</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencecpp-li><a href=/ja/reference/cpp/ title="C++ リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencecpp><span>C++</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppcpp-generated-li><a href=/ja/reference/cpp/cpp-generated/ title="C++ 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppcpp-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecpparenas-li><a href=/ja/reference/cpp/arenas/ title="C++ アリーナ割り当てガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecpparenas><span>アリーナ割り当てガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docs-link-li><a href=/reference/cpp/api-docs/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docs-link><span>C++ API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilercpp_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.cpp_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilercpp_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.csharp_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_names-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.csharp_names/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilercsharp_names><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.java_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_names-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.java_names/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjava_names><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjavanano_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.javanano_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjavanano_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerjs_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.js_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerjs_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerobjectivec_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.objectivec_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerobjectivec_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerparser-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.parser/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerparser><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerplugin-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.plugin/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerplugin><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerpluginpb-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.plugin.pb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerpluginpb><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerpython_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.python_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerpython_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufcompilerruby_generator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.compiler.ruby_generator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufcompilerruby_generator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufdescriptorpb-li><a href=/ja/reference/cpp/api-docs/google.protobuf.descriptor.pb/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufdescriptorpb><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufdynamic_message-li><a href=/ja/reference/cpp/api-docs/google.protobuf.dynamic_message/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufdynamic_message><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutilfield_comparator-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.field_comparator/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutilfield_comparator><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutiljson_util-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.json_util/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutiljson_util><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.type_resolver/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver_util-li><a href=/ja/reference/cpp/api-docs/google.protobuf.util.type_resolver_util/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecppapi-docsgoogleprotobufutiltype_resolver_util><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencecsharp-li><a href=/ja/reference/csharp/ title="C# リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencecsharp><span>C#</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecsharpcsharp-generated-li><a href=/ja/reference/csharp/csharp-generated/ title="C# 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecsharpcsharp-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencecsharpapi-docs-link-li><a href=/reference/csharp/api-docs target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencecsharpapi-docs-link><span>C# API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencedart-li><a href=/ja/reference/dart/ title="Dart リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencedart><span>Dart</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencedartdart-generated-li><a href=/ja/reference/dart/dart-generated/ title="Dart Generated Code" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencedartdart-generated><span>生成されたコード</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencedartapi-docs-link-li><a href=https://pub.dartlang.org/documentation/protobuf target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencedartapi-docs-link><span>Dart API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-jareferencego-li><a href=/ja/reference/go/ title=Goリファレンス class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencego><span>Go</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-jareferencegogo-generated-li><a href=/ja/reference/go/go-generated/ title="Go Generated Code Guide" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-jareferencegogo-generated><span class=td-sidebar-nav-active-item>生成されたコードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencegoapi-docs-link-li><a href=https://pkg.go.dev/google.golang.org/protobuf/proto target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencegoapi-docs-link><span>Go API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencegofaq-li><a href=/ja/reference/go/faq/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencegofaq><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencegosize-li><a href=/ja/reference/go/size/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencegosize><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencejava-li><a href=/ja/reference/java/ title="Java リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencejava><span>Java</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencejavajava-generated-li><a href=/ja/reference/java/java-generated/ title=Java生成コードガイド class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencejavajava-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencejavajava-proto-names-li><a href=/ja/reference/java/java-proto-names/ title="Java Proto Names" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencejavajava-proto-names><span>生成されたProto名</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencejavaapi-docs-link-li><a href=/reference/java/api-docs/overview-summary.html target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencejavaapi-docs-link><span>Java API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencekotlin-li><a href=/ja/reference/kotlin/ title="Kotlin リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencekotlin><span>Kotlin</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencekotlinapi-docs-li><a href=/ja/reference/kotlin/api-docs/ title="Kotlin リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencekotlinapi-docs><span>Kotlin</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencekotlinkotlin-generated-li><a href=/ja/reference/kotlin/kotlin-generated/ title="Kotlin 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencekotlinkotlin-generated><span>生成コードガイド</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferenceobjective-c-li><a href=/ja/reference/objective-c/ title="Objective-C リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferenceobjective-c><span>Objective-C</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceobjective-cobjective-c-generated-li><a href=/ja/reference/objective-c/objective-c-generated/ title="Objective-C 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceobjective-cobjective-c-generated><span>生成コードガイド</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencephp-li><a href=/ja/reference/php/ title="PHP リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencephp><span>PHP</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencephpphp-generated-li><a href=/ja/reference/php/php-generated/ title="PHP 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencephpphp-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencephpapi-docs-link-li><a href=/reference/php/api-docs/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencephpapi-docs-link><span>PHP API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferencepython-li><a href=/ja/reference/python/ title="Python リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferencepython><span>Python</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencepythonpython-generated-li><a href=/ja/reference/python/python-generated/ title="Python 生成コードガイド" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencepythonpython-generated><span>生成コードガイド</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencepythonapi-docs-link-li><a href=https://googleapis.dev/python/protobuf/latest/ target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencepythonapi-docs-link><span>Python API</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferenceruby-li><a href=/ja/reference/ruby/ title="Ruby リファレンス" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferenceruby><span>Ruby</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferencerubyruby-generated-li><a href=/ja/reference/ruby/ruby-generated/ title="Ruby Generated Code Guide" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferencerubyruby-generated><span>生成されたコードガイド</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jareferenceprotobuf-li><a href=/ja/reference/protobuf/ title=プロトコルバッファリファレンス class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jareferenceprotobuf><span>プロトコルバッファ</span></a><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufedition-2023-spec-li><a href=/ja/reference/protobuf/edition-2023-spec/ title="Protocol Buffers Edition 2023 言語仕様" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufedition-2023-spec><span>2023 言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufproto2-spec-li><a href=/ja/reference/protobuf/proto2-spec/ title="Protocol Buffers Version 2 言語仕様" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufproto2-spec><span>Version 2 言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufproto3-spec-li><a href=/ja/reference/protobuf/proto3-spec/ title="Protocol Buffers Version 3 言語仕様" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufproto3-spec><span>Version 3 言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobuftextformat-spec-li><a href=/ja/reference/protobuf/textformat-spec/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobuftextformat-spec><span>テキスト形式言語仕様</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceprotobufgoogleprotobuf-li><a href=/ja/reference/protobuf/google.protobuf/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceprotobufgoogleprotobuf><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jareferenceother-li><a href=/ja/reference/other/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jareferenceother><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-jasupport-li><a href=/ja/support/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-jasupport><span>サポート</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasupportversion-support-li><a href=/ja/support/version-support/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasupportversion-support><span>バージョンサポート</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasupportcross-version-runtime-guarantee-li><a href=/ja/support/cross-version-runtime-guarantee/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasupportcross-version-runtime-guarantee><span>クロスバージョンランタイム保証</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasupportmigration-li><a href=/ja/support/migration/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasupportmigration><span></span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jaforum-link-li><a href=https://groups.google.com/g/protobuf target=_blank rel=noopener class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jaforum-link><span>フォーラム</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jadownloads-li><a href=/ja/downloads/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jadownloads><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jahistory-li><a href=/ja/history/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jahistory><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-janavbar-li><a href=/ja/navbar/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-janavbar><span></span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-jasearch-li><a href=/ja/search/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-jasearch><span>検索結果</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/protocolbuffers/protocolbuffers.github.io/tree/main/content/reference/go/go-generated.ja.md class=td-page-meta--view target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
<a href=https://github.com/protocolbuffers/protocolbuffers.github.io/edit/main/content/reference/go/go-generated.ja.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> ページの編集</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/new/main/content/reference/go/go-generated.ja.md?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 子ページを作成</a>
<a href="https://github.com/protocolbuffers/protocolbuffers.github.io/issues/new?title=Go%20Generated%20Code%20Guide" class=td-page-meta--issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> ドキュメントのissueを作成</a>
<a href=https://github.com/protocolbuffers/protobuf/issues/new class=td-page-meta--project-issue target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> プロジェクトのissueを作成</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#invocation>コンパイラの呼び出し</a></li><li><a href=#package>パッケージ</a></li><li><a href=#message>メッセージ</a><ul><li><a href=#ネストされた型>ネストされた型</a></li></ul></li><li><a href=#fields>フィールド</a><ul><li><a href=#singular-scalar-proto2>単一スカラーフィールド (proto2)</a></li><li><a href=#singular-scalar-proto3>単一スカラーフィールド (proto3)</a></li><li><a href=#singular-message>単数メッセージフィールド</a></li><li><a href=#repeated>繰り返しフィールド</a></li><li><a href=#map>マップフィールド</a></li><li><a href=#oneof>ワンオブフィールド</a></li></ul></li><li><a href=#enum>列挙型</a></li><li><a href=#extensions>拡張機能（proto2）</a></li><li><a href=#service>サービス</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://protobuf.dev/ja/reference/>リファレンスガイド</a></li><li class=breadcrumb-item><a href=https://protobuf.dev/ja/reference/go/>Go</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://protobuf.dev/ja/reference/go/go-generated/ aria-disabled=true class="btn-link disabled">生成されたコードガイド</a></li></ol></nav><div class=td-content><h1>Go Generated Code Guide</h1><div class=lead>任意のプロトコル定義に対してプロトコルバッファコンパイラが生成するGoコードを正確に説明します。</div><header class=article-meta></header><p>proto2 と proto3 で生成されるコードの違いは強調されています - これらの違いは、このドキュメントで説明されている生成されたコードにあります。これは、両バージョンで同じであるベースAPIではありません。このドキュメントを読む前に、<a href=/programming-guides/proto2>proto2 言語ガイド</a> および/または <a href=/programming-guides/proto3>proto3 言語ガイド</a> を読む必要があります。</p><h2 id=invocation>コンパイラの呼び出し</h2><p>プロトコルバッファコンパイラは、Goコードを生成するためにプラグインが必要です。Go 1.16 以上を使用して、次のコマンドを実行してインストールします:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
</span></span></code></pre></div><p>これにより、<code>protoc-gen-go</code> バイナリが <code>$GOBIN</code> にインストールされます。インストール場所を変更するには、<code>$GOBIN</code> 環境変数を設定します。プロトコルバッファコンパイラがそれを見つけるためには、<code>$PATH</code> にある必要があります。</p><p>プロトコルバッファコンパイラは、<code>go_out</code> フラグを使用してGo出力を生成します。<code>go_out</code> フラグの引数は、コンパイラがGo出力を書き込むディレクトリです。各 <code>.proto</code> ファイル入力に対して、コンパイラは単一のソースファイルを作成します。出力ファイルの名前は、<code>.proto</code> 拡張子を <code>.pb.go</code> に置き換えることで作成されます。</p><p>生成された <code>.pb.go</code> ファイルが出力ディレクトリ内のどこに配置されるかは、コンパイラフラグに依存します。いくつかの出力モードがあります:</p><ul><li><code>paths=import</code> フラグが指定されている場合、出力ファイルは、Goパッケージのインポートパスに基づいたディレクトリに配置されます（たとえば、<code>.proto</code> ファイル内の <code>go_package</code> オプションで提供されるもの）。たとえば、Goインポートパスが <code>example.com/project/protos/fizz</code> である入力ファイル <code>protos/buzz.proto</code> は、出力ファイルが <code>example.com/project/protos/fizz/buzz.pb.go</code> になります。<code>paths</code> フラグが指定されていない場合、これがデフォルトの出力モードです。</li><li><code>module=$PREFIX</code> フラグが指定されている場合、出力ファイルは、Goパッケージのインポートパスに基づいたディレクトリに配置されます（たとえば、<code>.proto</code> ファイル内の <code>go_package</code> オプションで提供されるもの）、ただし、指定されたディレクトリプレフィックスが出力ファイル名から削除されます。たとえば、Goインポートパスが <code>example.com/project/protos/fizz</code> であり、<code>example.com/project</code> が <code>module</code> プレフィックスとして指定されている場合、出力ファイルは <code>protos/fizz/buzz.pb.go</code> になります。モジュールパス外にGoパッケージを生成するとエラーが発生します。このモードは、生成されたファイルを直接Goモジュールに出力するために便利です。</li><li><code>paths=source_relative</code> フラグが指定されている場合、出力ファイルは、入力ファイルと同じ相対ディレクトリに配置されます。たとえば、入力ファイル <code>protos/buzz.proto</code> は、出力ファイルが <code>protos/buzz.pb.go</code> になります。</li></ul><p>フラグは、<code>protoc</code>を呼び出す際に<code>go_opt</code>フラグを渡すことで、<code>protoc-gen-go</code>に固有のものが提供されます。複数の<code>go_opt</code>フラグを渡すことができます。例えば、次のように実行します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src --go_out<span style=color:#ce5c00;font-weight:700>=</span>out --go_opt<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>paths</span><span style=color:#ce5c00;font-weight:700>=</span>source_relative foo.proto bar/baz.proto
</span></span></code></pre></div><p>コンパイラは、<code>src</code>ディレクトリ内の入力ファイル<code>foo.proto</code>と<code>bar/baz.proto</code>を読み取り、出力ファイル<code>foo.pb.go</code>と<code>bar/baz.pb.go</code>を<code>out</code>ディレクトリに書き込みます。必要に応じてコンパイラはネストされた出力サブディレクトリを自動的に作成しますが、出力ディレクトリ自体は作成しません。</p><h2 id=package>パッケージ</h2><p>Goコードを生成するためには、各<code>.proto</code>ファイルに対してGoパッケージのインポートパスを指定する必要があります（<code>.proto</code>ファイルが生成される<code>.proto</code>ファイルに間接的に依存している場合も含む）。Goインポートパスを指定する方法は2つあります：</p><ul><li><code>.proto</code>ファイル内で宣言するか、</li><li><code>protoc</code>を呼び出す際にコマンドラインで宣言するか。</li></ul><p><code>protoc</code>を呼び出す際にGoインポートパスを指定することをお勧めします。<code>.proto</code>ファイル内でGoパッケージを宣言することで、<code>.proto</code>ファイルのGoパッケージが<code>.proto</code>ファイル自体と一緒に一元的に識別され、<code>protoc</code>を呼び出す際に渡すフラグのセットを簡素化できます。<code>.proto</code>ファイルに対するGoインポートパスが<code>.proto</code>ファイル自体とコマンドラインの両方で提供される場合、後者が優先されます。</p><p>Goインポートパスは、<code>.proto</code>ファイル内で<code>go_package</code>オプションを使用してGoパッケージの完全なインポートパスを宣言することでローカルに指定されます。使用例：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>option</span> <span style=color:#000>go_package</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;example.com/project/protos/fizz&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラを呼び出す際にGoインポートパスを指定するには、1つ以上の<code>M${PROTO_FILE}=${GO_IMPORT_PATH}</code>フラグを渡すことで可能です。使用例：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>protoc --proto_path<span style=color:#ce5c00;font-weight:700>=</span>src <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --go_opt<span style=color:#ce5c00;font-weight:700>=</span>Mprotos/buzz.proto<span style=color:#ce5c00;font-weight:700>=</span>example.com/project/protos/fizz <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  --go_opt<span style=color:#ce5c00;font-weight:700>=</span>Mprotos/bar.proto<span style=color:#ce5c00;font-weight:700>=</span>example.com/project/protos/foo <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>  protos/buzz.proto protos/bar.proto
</span></span></code></pre></div><p>すべての<code>.proto</code>ファイルをそれぞれのGoインポートパスにマッピングすることは非常に大きな作業となるため、この方法でGoインポートパスを指定することは、通常、依存関係ツリー全体を制御するビルドツール（例：<a href=https://bazel.build/>Bazel</a>）によって実行されます。特定の<code>.proto</code>ファイルに重複するエントリがある場合、最後に指定されたものが優先されます。</p><p><code>go_package</code> オプションと <code>M</code> フラグの両方について、値にはセミコロンで区切られたインポートパスから明示的なパッケージ名を含めることができます。例: <code>"example.com/protos/foo;package_name"</code>。この使用法は推奨されていません。なぜなら、パッケージ名は通常、インポートパスから適切な方法でデフォルトで派生されるからです。</p><p>インポートパスは、1 つの <code>.proto</code> ファイルが別の <code>.proto</code> ファイルをインポートする場合に生成されるインポートステートメントを決定するために使用されます。例えば、<code>a.proto</code> が <code>b.proto</code> をインポートする場合、生成された <code>a.pb.go</code> ファイルは、生成された <code>b.pb.go</code> ファイルを含む Go パッケージをインポートする必要があります（両方のファイルが同じパッケージにない限り）。インポートパスは、出力ファイル名を構築するためにも使用されます。詳細については、上記の「Compiler Invocation」セクションを参照してください。</p><p>Go のインポートパスと <code>.proto</code> ファイル内の <a href=/programming-guides/proto3#packages><code>package</code> 指定子</a>との間には、相関関係はありません。後者は protobuf の名前空間にのみ関連し、前者は Go の名前空間にのみ関連します。また、Go のインポートパスと <code>.proto</code> のインポートパスとの間にも相関関係はありません。</p><h2 id=message>メッセージ</h2><p>単純なメッセージ宣言が与えられた場合:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Artist</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>プロトコルバッファコンパイラは <code>Artist</code> という構造体を生成します。<code>*Artist</code> は <a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#Message"><code>proto.Message</code></a> インターフェースを実装します。</p><p><a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc"><code>proto</code> パッケージ</a> は、バイナリ形式への変換を含むメッセージに操作を行う関数を提供します。</p><p><code>proto.Message</code> インターフェースは <code>ProtoReflect</code> メソッドを定義しています。このメソッドは、メッセージのリフレクションベースのビューを提供する <a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect?tab=doc#Message"><code>protoreflect.Message</code></a> を返します。</p><p><code>optimize_for</code> オプションは、Go コードジェネレータの出力に影響を与えません。</p><h3 id=ネストされた型>ネストされた型</h3><p>メッセージは別のメッセージ内で宣言することができます。例:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Artist</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Name</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>この場合、コンパイラは <code>Artist</code> と <code>Artist_Name</code> の 2 つの構造体を生成します。</p><h2 id=fields>フィールド</h2><p>プロトコルバッファコンパイラは、メッセージ内で定義された各フィールドに対して構造体フィールドを生成します。このフィールドの正確な性質は、そのタイプと単数形、繰り返し形、マップ形、または oneof フィールドかどうかによって異なります。</p><p>生成された Go フィールド名は常にキャメルケースの命名規則を使用しますが、<code>.proto</code> ファイル内のフィールド名がアンダースコアを使用した小文字であっても
(<a href=/programming-guides/style#message-field-names>それが望ましい形式</a>である場合) です。大文字への変換は次のように機能します:</p><ol><li>最初の文字はエクスポート用に大文字化されます。最初の文字がアンダースコアの場合、それは削除され、大文字の X が前に付加されます。</li><li>アンダースコアの後に小文字の文字が続く場合、アンダースコアは削除され、次の文字が大文字化されます。</li></ol><p>したがって、proto フィールド <code>birth_year</code> は Go では <code>BirthYear</code> となり、
<code>_birth_year_2</code> は <code>XBirthYear_2</code> となります。</p><h3 id=singular-scalar-proto2>単一スカラーフィールド (proto2)</h3><p>次のいずれかのフィールド定義の場合:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>birth_year</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>required</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>birth_year</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは、<code>Artist</code> 内の <code>int32</code> 値またはフィールドが未設定の場合のデフォルト値を返す <code>GetBirthYear()</code> アクセサメソッドと、<code>BirthYear</code> という名前の <code>*int32</code> フィールドを持つ構造体を生成します。デフォルトが明示的に設定されていない場合、そのタイプの<a href=https://golang.org/ref/spec#The_zero_value>ゼロ値</a>が代わりに使用されます（数値の場合は <code>0</code>、文字列の場合は空の文字列）。</p><p>他のスカラーフィールドタイプ（<code>bool</code>、<code>bytes</code>、<code>string</code> を含む）については、<code>*int32</code> は、<a href=/programming-guides/proto2#scalar>スカラー値タイプテーブル</a>に従って対応する Go タイプに置き換えられます。</p><h3 id=singular-scalar-proto3>単一スカラーフィールド (proto3)</h3><p>このフィールド定義の場合:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>birth_year</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>first_active_year</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは、<code>birth_year</code> 内の <code>int32</code> 値またはフィールドが未設定の場合のデフォルト値を返す <code>GetBirthYear()</code> アクセサメソッドと、<code>BirthYear</code> という名前の <code>int32</code> フィールドを持つ構造体を生成します。フィールドが未設定の場合は、そのタイプの<a href=https://golang.org/ref/spec#The_zero_value>ゼロ値</a>が代わりに使用されます（数値の場合は <code>0</code>、文字列の場合は空の文字列）。</p><p>他のスカラーフィールドタイプ（<code>bool</code>、<code>bytes</code>、<code>string</code>を含む）については、<code>int32</code>は、<a href=/programming-guides/proto3#scalar>スカラー値の種類テーブル</a>に従って対応するGoタイプに置き換えられます。Proto内の未設定の値は、そのタイプの<a href=https://golang.org/ref/spec#The_zero_value>ゼロ値</a>として表されます（数値の場合は<code>0</code>、文字列の場合は空の文字列）。</p><h3 id=singular-message>単数メッセージフィールド</h3><p>次のメッセージタイプが与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Band</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p><code>Band</code>フィールドを持つメッセージに対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// proto2
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Concert</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Band</span> <span style=color:#000>headliner</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// The generated code is the same result if required instead of optional.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#8f5902;font-style:italic>// proto3
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Concert</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Band</span> <span style=color:#000>headliner</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラはGoの構造体を生成します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Concert</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Headliner</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Band</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>メッセージフィールドは<code>nil</code>に設定することができ、これはフィールドが未設定であることを意味し、実質的にフィールドをクリアします。これは、メッセージ構造体の"空の"インスタンスに値を設定するのとは等しくありません。</p><p>コンパイラはまた、<code>func (m *Concert) GetHeadliner() *Band</code>ヘルパー関数を生成します。この関数は、<code>m</code>が<code>nil</code>であるか<code>headliner</code>が未設定の場合に<code>nil</code>の<code>*Band</code>を返します。これにより、中間の<code>nil</code>チェックなしにget呼び出しをチェーンすることが可能になります：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Concert</span> <span style=color:#8f5902;font-style:italic>// デフォルトはnil
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>log</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;GetFoundingYear() = %d (no panic!)&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetHeadliner</span><span style=color:#000;font-weight:700>().</span><span style=color:#000>GetFoundingYear</span><span style=color:#000;font-weight:700>())</span>
</span></span></code></pre></div><h3 id=repeated>繰り返しフィールド</h3><p>各繰り返しフィールドは、Goの構造体内の<code>T</code>フィールドのスライスを生成します。ここで、<code>T</code>はフィールドの要素タイプです。次の繰り返しフィールドを持つメッセージに対して：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Concert</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// Best practice: use pluralized names for repeated fields:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// /programming-guides/style#repeated-fields
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#000>Band</span> <span style=color:#000>support_acts</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラはGoの構造体を生成します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Concert</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>SupportActs</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Band</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>同様に、<code>repeated bytes band_promo_images = 1;</code>のフィールド定義の場合、コンパイラは<code>BandPromoImage</code>という<code>[][]byte</code>フィールドを持つGo構造体を生成します。<code>repeated [enumeration](#enum)</code>の場合、<code>repeated MusicGenre genres = 2;</code>、コンパイラは<code>Genre</code>という<code>[]MusicGenre</code>フィールドを持つ構造体を生成します。</p><p>次の例は、フィールドを設定する方法を示しています：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>concert</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>Concert</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>SupportActs</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Band</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>{},</span> <span style=color:#8f5902;font-style:italic>// First element.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000;font-weight:700>{},</span> <span style=color:#8f5902;font-style:italic>// Second element.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>フィールドにアクセスするには、次のようにします：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>support</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>concert</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetSupportActs</span><span style=color:#000;font-weight:700>()</span> <span style=color:#8f5902;font-style:italic>// サポートの型は []*Band です。
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>b1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>support</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic>// b1の型は *Band で、support_actsの最初の要素です。
</span></span></span></code></pre></div><h3 id=map>マップフィールド</h3><p>各マップフィールドは、<code>TKey</code> がフィールドのキータイプであり、<code>TValue</code> がフィールドの値のタイプである <code>map[TKey]TValue</code> 型の構造体内のフィールドを生成します。次のマップフィールドを持つメッセージの場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MerchItem</span> <span style=color:#000;font-weight:700>{}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>MerchBooth</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// items maps from merchandise item name (&#34;Signed T-Shirt&#34;) to
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#8f5902;font-style:italic>// a MerchItem message with more details about the item.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MerchItem</span><span style=color:#000;font-weight:700>&gt;</span> <span style=color:#000>items</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次の Go 構造体を生成します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>MerchBooth</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Items</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>MerchItem</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=oneof>ワンオブフィールド</h3><p>ワンオブフィールドの場合、protobuf コンパイラは、インターフェースタイプ <code>isMessageName_MyField</code> を持つ単一のフィールドを生成します。また、ワンオブ内の<a href=#singular-scalar-proto2>単数フィールド</a>ごとに構造体を生成します。これらはすべて <code>isMessageName_MyField</code> インターフェースを実装します。</p><p>次のワンオブフィールドを持つメッセージの場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>package</span> <span style=color:#000>account</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Profile</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>oneof</span> <span style=color:#000>avatar</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>string</span> <span style=color:#000>image_url</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>image_data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>コンパイラは次の構造体を生成します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Profile</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Types that are valid to be assigned to Avatar:
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>//  *Profile_ImageUrl
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>//  *Profile_ImageData
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>Avatar</span> <span style=color:#000>isProfile_Avatar</span> <span style=color:#4e9a06>`protobuf_oneof:&#34;avatar&#34;`</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Profile_ImageUrl</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>ImageUrl</span> <span style=color:#204a87;font-weight:700>string</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Profile_ImageData</span> <span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>ImageData</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>byte</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><code>*Profile_ImageUrl</code> と <code>*Profile_ImageData</code> は、空の <code>isProfile_Avatar()</code> メソッドを提供することで <code>isProfile_Avatar</code> を実装します。</p><p>次の例は、フィールドを設定する方法を示しています：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>p1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Avatar</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageUrl</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>ImageUrl</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;http://example.com/image.png&#34;</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>// imageData is []byte
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>imageData</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>getImageData</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>p2</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#000>Avatar</span><span style=color:#000;font-weight:700>:</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageData</span><span style=color:#000;font-weight:700>{</span><span style=color:#000>ImageData</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>imageData</span><span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>フィールドにアクセスするには、値に対して型スイッチを使用して異なるメッセージタイプを処理します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>switch</span> <span style=color:#000>x</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Avatar</span><span style=color:#000;font-weight:700>.(</span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>case</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageUrl</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Load profile image based on URL
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// using x.ImageUrl
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>case</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>account</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Profile_ImageData</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// Load profile image based on bytes
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#8f5902;font-style:italic>// using x.ImageData
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>case</span> <span style=color:#204a87;font-weight:700>nil</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic>// The field is not set.
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#204a87;font-weight:700>default</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>fmt</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Profile.Avatar has unexpected type %T&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>x</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p>コンパイラはまた、<code>func (m *Profile) GetImageUrl() string</code> および <code>func (m *Profile) GetImageData() []byte</code> の取得メソッドを生成します。各取得関数は、そのフィールドの値または設定されていない場合はゼロ値を返します。</p><h2 id=enum>列挙型</h2><p>次のような列挙型が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Venue</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Kind</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>KIND_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>KIND_CONCERT_HALL</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>KIND_STADIUM</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>KIND_BAR</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#000>KIND_OPEN_AIR_FESTIVAL</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>Kind</span> <span style=color:#000>kind</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>プロトコルバッファコンパイラは、その型と一連の定数を生成します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Venue_Kind</span> <span style=color:#204a87;font-weight:700>int32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_UNSPECIFIED</span>       <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_CONCERT_HALL</span>      <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_STADIUM</span>           <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_BAR</span>               <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_OPEN_AIR_FESTIVAL</span> <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>メッセージ内の列挙型（上記のものなど）の場合、型名はメッセージ名で始まります：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Venue_Kind</span> <span style=color:#204a87;font-weight:700>int32</span>
</span></span></code></pre></div><p>パッケージレベルの列挙型の場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>enum</span> <span style=color:#000>Genre</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>GENRE_UNSPECIFIED</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>GENRE_ROCK</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>GENRE_INDIE</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000>GENRE_DRUM_AND_BASS</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#8f5902;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>Go の型名は proto 列挙型名から変更されません：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>Genre</span> <span style=color:#204a87;font-weight:700>int32</span>
</span></span></code></pre></div><p>この型には、与えられた値の名前を返す <code>String()</code> メソッドがあります。</p><p><code>Enum()</code> メソッドは、与えられた値で新しく割り当てられたメモリを初期化し、対応するポインタを返します。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>Genre</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000>Enum</span><span style=color:#000;font-weight:700>()</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>Genre</span>
</span></span></code></pre></div><p>プロトコルバッファコンパイラは、列挙型の各値に対して定数を生成します。
メッセージ内の列挙型の場合、定数は包含メッセージの名前で始まります：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_UNSPECIFIED</span>       <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_CONCERT_HALL</span>      <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_STADIUM</span>           <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_BAR</span>               <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Venue_KIND_OPEN_AIR_FESTIVAL</span> <span style=color:#000>Venue_Kind</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>パッケージレベルの列挙型の場合、定数は列挙型の名前で始まります：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>const</span> <span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Genre_GENRE_UNSPECIFIED</span>   <span style=color:#000>Genre</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Genre_GENRE_ROCK</span>          <span style=color:#000>Genre</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Genre_GENRE_INDIE</span>         <span style=color:#000>Genre</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span>    <span style=color:#000>Genre_GENRE_DRUM_AND_BASS</span> <span style=color:#000>Genre</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>また、protobufコンパイラは整数値から文字列名へのマップと、名前から値へのマップも生成します：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>Genre_name</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;GENRE_UNSPECIFIED&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;GENRE_ROCK&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;GENRE_INDIE&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;GENRE_DRUM_AND_BASS&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>Genre_value</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;GENRE_UNSPECIFIED&#34;</span><span style=color:#000;font-weight:700>:</span>   <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;GENRE_ROCK&#34;</span><span style=color:#000;font-weight:700>:</span>          <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;GENRE_INDIE&#34;</span><span style=color:#000;font-weight:700>:</span>         <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;GENRE_DRUM_AND_BASS&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><code>.proto</code>言語では、複数の列挙型シンボルが同じ数値を持つことができます。同じ数値を持つシンボルは同義語です。これらはGoではまったく同じ方法で表され、同じ数値に対応する複数の名前があります。逆マッピングには、<code>.proto</code>ファイルで最初に表示される名前に対する数値の単一エントリが含まれます。</p><h2 id=extensions>拡張機能（proto2）</h2><p>拡張機能の定義が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Concert</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>promo_id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>123</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>プロトコルバッファコンパイラは、<code>E_Promo_id</code>という名前の
<a href="https://pkg.go.dev/google.golang.org/protobuf/reflect/protoreflect?tab=doc#ExtensionType"><code>protoreflect.ExtensionType</code></a>
値を生成します。この値は、メッセージ内の拡張機能にアクセスするために
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#GetExtension"><code>proto.GetExtension</code></a>、
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#SetExtension"><code>proto.SetExtension</code></a>、
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#HasExtension"><code>proto.HasExtension</code></a>、および
<a href="https://pkg.go.dev/google.golang.org/protobuf/proto?tab=doc#ClearExtension"><code>proto.ClearExtension</code></a>
関数と共に使用できます。<code>GetExtension</code>関数と<code>SetExtension</code>関数は、それぞれ拡張機能の値を含む<code>interface{}</code>値を返し、受け入れます。</p><p>単一のスカラー拡張フィールドの場合、拡張機能の値の型は、
<a href=/programming-guides/proto3#scalar>スカラー値型テーブル</a>からの対応するGo型です。</p><p>単一の埋め込みメッセージ拡張フィールドの場合、拡張機能の値の型は<code>*M</code>であり、<code>M</code>はフィールドメッセージ型です。</p><p>拡張フィールドが繰り返しの場合、拡張値の型は単数形のスライスです。</p><p>たとえば、次の定義が与えられた場合：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Concert</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>singular_int32</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>repeated</span> <span style=color:#204a87;font-weight:700>bytes</span> <span style=color:#000>repeated_strings</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#000>Band</span> <span style=color:#000>singular_message</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>拡張値は次のようにアクセスできます：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#000>m</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>somepb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Concert</span><span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span><span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularInt32</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>int32</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span><span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_RepeatedString</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;a&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;b&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;c&#34;</span><span style=color:#000;font-weight:700>})</span>
</span></span><span style=display:flex><span><span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>SetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularMessage</span><span style=color:#000;font-weight:700>,</span> <span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Band</span><span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>v1</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularInt32</span><span style=color:#000;font-weight:700>).(</span><span style=color:#204a87;font-weight:700>int32</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>v2</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_RepeatedString</span><span style=color:#000;font-weight:700>).([][]</span><span style=color:#204a87;font-weight:700>byte</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>v3</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#000>proto</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>GetExtension</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>m</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>E_SingularMessage</span><span style=color:#000;font-weight:700>).(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>extpb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Band</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><p>拡張は別の型の中にネストして宣言することができます。たとえば、次のようにするのが一般的なパターンです：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>Promo</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#204a87;font-weight:700>extend</span> <span style=color:#000>Concert</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>    <span style=color:#204a87;font-weight:700>optional</span> <span style=color:#204a87;font-weight:700>int32</span> <span style=color:#000>promo_id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>124</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span>  <span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span><span style=color:#a40000></span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><p>この場合、<code>ExtensionType</code> の値は <code>E_Promo_Concert</code> と名前付けられています。</p><h2 id=service>サービス</h2><p>Goコードジェネレータはデフォルトではサービスの出力を生成しません。<a href=https://www.grpc.io/>gRPC</a> プラグインを有効にすると（<a href=https://github.com/grpc/grpc-go/tree/master/examples>gRPC Goクイックスタートガイド</a>を参照）、gRPCをサポートするためのコードが生成されます。</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/protocol-buffers aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/protocolbuffers/protobuf aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://groups.google.com/g/protobuf aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul><script type=text/javascript id=cookiebanner src=https://cdn.jsdelivr.net/gh/dobarkod/cookie-banner@1.2.2/dist/cookiebanner.min.js data-height=50px data-message="Protobuf.dev uses cookies from Google to deliver and enhance the quality of its services and to analyze traffic." data-bg=#ffb data-fg=#000 data-position=bottom data-padding="10px 16px" data-close-text="OK, got it" data-font-size=18px data-moreinfo=https://policies.google.com/technologies/cookies></script></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2024 Google LLC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>プライバシーポリシー</a></small>
<span class=text-white>Hosted by GitHub Pages.</span> <a href=https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement target=_blank>GitHub Privacy Statement</a></div></div></div></footer></div><script src=/js/main.min.ba08a6b7f24e657f0a1b9b55be3a3162585168cd862ace0957f5b44e6cb6dc61.js integrity="sha256-ugimt/JOZX8KG5tVvjoxYlhRaM2GKs4JV/W0Tmy23GE=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>